/*
 regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
(function(K){var A=window.AmazonUIPageJS||window.P,p=A._namespace||A.attributeErrors,I=p?p("IdentityWebAuthnAssets",""):A;I.guardFatal?I.guardFatal(K)(I,window):I.execute(function(){K(I,window)})})(function(K,A,p){var I=function(){return function(u,A){if(Array.isArray(u))return u;if(Symbol.iterator in Object(u)){var F=[],I=!0,b=!1,c=p;try{for(var a=u[Symbol.iterator](),e;!(I=(e=a.next()).done)&&(F.push(e.value),!A||F.length!==A);I=!0);}catch(h){b=!0,c=h}finally{try{if(!I&&a["return"])a["return"]()}finally{if(b)throw c;
}}return F}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"===typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},ea;(function(){function F(b){var c=ca[b];if(c!==p)return c.exports;c=ca[b]={exports:{}};K[b](c,c.exports,F);return c.exports}var K={6957:function(b,c,a){function e(a){"@babel/helpers - typeof";return e=
"function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(g){return"undefined"===typeof g?"undefined":u(g)}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":"undefined"===typeof g?"undefined":u(g)},e(a)}function h(a){return a&&a.__esModule?a:{"default":a}}function m(a){if("function"!==typeof WeakMap)return null;var g=new WeakMap,d=new WeakMap;return(m=function(a){return a?d:g})(a)}function k(a,g){if(!g&&a&&a.__esModule)return a;if(null===
a||"object"!==e(a)&&"function"!==typeof a)return{"default":a};if((g=m(g))&&g.has(a))return g.get(a);var d={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor,c;for(c in a)if("default"!==c&&Object.prototype.hasOwnProperty.call(a,c)){var v=b?Object.getOwnPropertyDescriptor(a,c):null;v&&(v.get||v.set)?Object.defineProperty(d,c,v):d[c]=a[c]}d["default"]=a;g&&g.set(a,d);return d}Object.defineProperty(c,"__esModule",{value:!0});Object.defineProperty(c,"AmazonDomainHelper",{enumerable:!0,get:function(){return r["default"]}});
Object.defineProperty(c,"CookieHelper",{enumerable:!0,get:function(){return x["default"]}});Object.defineProperty(c,"IdentityKatalMetricsPublisher",{enumerable:!0,get:function(){return n["default"]}});Object.defineProperty(c,"MetricsOption",{enumerable:!0,get:function(){return n.MetricsOption}});Object.defineProperty(c,"Platform",{enumerable:!0,get:function(){return t.Platform}});Object.defineProperty(c,"PlatformDetector",{enumerable:!0,get:function(){return t["default"]}});Object.defineProperty(c,
"generateUUID",{enumerable:!0,get:function(){return l["default"]}});Object.defineProperty(c,"getSanitizedClientNameByPath",{enumerable:!0,get:function(){return w["default"]}});var n=k(a(660)),t=k(a(4560)),l=h(a(9606)),x=h(a(5903)),r=h(a(1472)),w=h(a(456))},660:function(b,c,a){function e(a){"@babel/helpers - typeof";return e="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===
Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},e(a)}function h(a){return a&&a.__esModule?a:{"default":a}}function m(a){if("function"!==typeof WeakMap)return null;var g=new WeakMap,d=new WeakMap;return(m=function(a){return a?d:g})(a)}function k(a,g){for(var d=0;d<g.length;d++){var b=g[d];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(a,b.key,b)}}function n(a,g,d){g&&k(a.prototype,g);d&&k(a,d);Object.defineProperty(a,
"prototype",{writable:!1});return a}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var t=function(a,g){if(!g&&a&&a.__esModule)return a;if(null===a||"object"!==e(a)&&"function"!==typeof a)return{"default":a};if((g=m(g))&&g.has(a))return g.get(a);var d={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor,c;for(c in a)if("default"!==c&&Object.prototype.hasOwnProperty.call(a,c)){var v=b?Object.getOwnPropertyDescriptor(a,c):null;v&&(v.get||v.set)?Object.defineProperty(d,c,
v):d[c]=a[c]}d["default"]=a;g&&g.set(a,d);return d}(a(5989)),l=h(a(8277)),x=h(a(1472)),r=h(a(4560)),w=h(a(5903));b=function(){function a(g,d,b,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.cookieHelper=new w["default"];this.platformDetector=new r["default"];this.siteName=g;this.serviceName=d;this.methodName=b;var v=A.location.hostname;a.AMAZON_DOMAIN_HELPER=new x["default"];var y=a.getDataSet(v);v=a.AMAZON_DOMAIN_HELPER.getMarketplaceRealm(v);g=(new t.Context.Builder).withSite(g).withServiceName(d);
c&&(g.withActionId(c),this.actionId=c);(c=this.cookieHelper.getCookieValue("session-id"))&&g.withRelatedMetrics(new t.Metric.String("session-id",c));c=g.build();g=g.withRelatedMetrics().build();d=function(a){console.error("Unable to publish metrics",a)};y=(new l["default"].Builder).withDomainRealm(y,v).withErrorHandler(d).withSushiClientOptions({hiPriFlushInterval:8,lowPriFlushInterval:13}).build();this.childMetricsPublisher=(new t.Publisher(y,d,c)).newChildActionPublisherForMethod(b,g)}n(a,[{key:"attachDimensions",
value:function(a,d){var g={};d&&"undefined"!==typeof d.os&&(g.os=d.os);d&&"undefined"!==typeof d.browser&&(g.browser=d.browser);d&&"undefined"!==typeof d.consentui&&(g.consentui=d.consentui);d&&"undefined"!==typeof d.pb&&(g.pb=d.pb);a="".concat(a);for(var b in g)a="".concat(a,":").concat(b,"@").concat(g[b]);return a}},{key:"sanitizeMetricsKey",value:function(a){return a.replace(":","_")}},{key:"publishCounter",value:function(a,d){var g=2<arguments.length&&arguments[2]!==p?arguments[2]:{metricsDimension:{os:this.platformDetector.getOSName(),
browser:this.platformDetector.getBrowserName()}},b=this.sanitizeMetricsKey(a);b=this.attachDimensions(b,g.metricsDimension);this.childMetricsPublisher.publishCounterMonitor(b,d)}},{key:"publishString",value:function(a,d){this.childMetricsPublisher.publishString(a,d)}},{key:"publishStringTruncate",value:function(a,d){this.childMetricsPublisher.publishStringTruncate(a,d)}},{key:"publishCounterOnce",value:function(a){this.publishCounter(a,1,1<arguments.length&&arguments[1]!==p?arguments[1]:{})}},{key:"publishTimer",
value:function(a,d){var b=2<arguments.length&&arguments[2]!==p?arguments[2]:{metricsDimension:{os:this.platformDetector.getOSName(),browser:this.platformDetector.getBrowserName()}},g=this.sanitizeMetricsKey(a);g=this.attachDimensions(g,b.metricsDimension);this.childMetricsPublisher.publishTimerMonitor(g,d)}},{key:"getActionId",value:function(){return this.actionId}},{key:"getSiteName",value:function(){return this.siteName}},{key:"getServiceName",value:function(){return this.serviceName}},{key:"getMethodName",
value:function(){return this.methodName}}],[{key:"getDataSet",value:function(b){return a.AMAZON_DOMAIN_HELPER.isAmazonProdDomain(b)?"prod":"test"}}]);return a}();c["default"]=b;(function(a,b,d){b in a?Object.defineProperty(a,b,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[b]=d;return a})(b,"AMAZON_DOMAIN_HELPER",new x["default"])},456:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c["default"]=function(){var b=a.find(function(a){return A.location.pathname.startsWith(a)});
b||(b=A.location.pathname.split("/"),b=b.slice(0,3<=b.length?3:b.length).join("/"));return b.replace(/\//g,"_")};var a=["/ap/signin","/ap/cnep","/ax/claim/webauthn/nudge","/ax/claim/webauthn/enroll","/ax/account/manage"]},1472:function(b,c){function a(a,b){var c="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!c){if(Array.isArray(a)||(c=e(a))||b&&a&&"number"===typeof a.length){c&&(a=c);var l=0;b=function(){};return{s:b,n:function(){return l>=a.length?{done:!0}:{done:!1,value:a[l++]}},
e:function(a){throw a;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var t=!0,v=!1,g;return{s:function(){c=c.call(a)},n:function(){var a=c.next();t=a.done;return a},e:function(a){v=!0;g=a},f:function(){try{if(!t&&null!=c["return"])c["return"]()}finally{if(v)throw g;}}}}function e(a,b){if(a){if("string"===typeof a)return h(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);"Object"===
c&&a.constructor&&(c=a.constructor.name);if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return h(a,b)}}function h(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,l=Array(b);c<b;c++)l[c]=a[c];return l}function m(a,b){for(var c=0;c<b.length;c++){var l=b[c];l.enumerable=l.enumerable||!1;l.configurable=!0;"value"in l&&(l.writable=!0);Object.defineProperty(a,l.key,l)}}function k(a,b,c){b&&m(a.prototype,b);c&&m(a,c);Object.defineProperty(a,
"prototype",{writable:!1});return a}function n(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;b=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");}k(b,[{key:"isAmazonDomain",value:function(a){return b.AMAZON_ENDPOINT_REGEX.test(a)}},{key:"isDevoDomain",value:function(a){return b.DEVO_ENDPOINT_REGEX.test(a)}},{key:"isAmazonProdDomain",
value:function(a){return this.isAmazonDomain(a)&&!this.isDevoDomain(a)}},{key:"getMarketplaceDomain",value:function(a){return a&&(a=a.match(b.AMAZON_ENDPOINT_REGEX))?(a=a[0],a.startsWith(".")?a.substring(1):a):b.US_AMAZON_DOMAIN}},{key:"getMarketplaceRealm",value:function(a){a=this.getMarketplaceDomain(a);return(a=b.DOMAIN_REALEM_MAPPING[a])?a:b.NA_AMAZON_REALM}},{key:"encodeUrl",value:function(b){try{if(!b)return null;var c=new URL(b);b="";var l=a(c.searchParams),k;try{for(l.s();!(k=l.n()).done;){var v=
k.value;b="".concat(0===b.length?"":b+"\x26").concat(v[0],"\x3d").concat(encodeURIComponent(v[1]))}}catch(g){l.e(g)}finally{l.f()}return c.protocol+"//"+c.host+("/"===c.pathname?"":c.pathname)+(0<b.length?"?"+b:"")+(c.hash?c.hash:"")}catch(g){return console.error(g),null}}}]);return b}();c["default"]=b;n(b,"NA_AMAZON_REALM","NAAmazon");n(b,"EU_AMAZON_REALM","EUAmazon");n(b,"FE_AMAZON_REALM","FEAmazon");n(b,"CN_AMAZON_REALM","CNAmazon");n(b,"AMAZON_ENDPOINT_REGEX",/(^|\.)amazon\.((ae|ca|cn|com|de|eg|es|eu|fr|in|it|nl|pl|sa|se|sg|cl|co\.(jp|uk|za))|com\.(au|br|mx|sg|tr|co|ng|be))$/);
n(b,"US_AMAZON_DOMAIN","amazon.com");n(b,"DEVO_ENDPOINT_REGEX",/(localhost)|(\.integ\.)|([-]*development\.)|(dev-dsk-)|(\.corp\.)/);n(b,"DOMAIN_REALEM_MAPPING",{"amazon.com":b.NA_AMAZON_REALM,"amazon.ca":b.NA_AMAZON_REALM,"amazon.com.br":b.NA_AMAZON_REALM,"amazon.com.co":b.NA_AMAZON_REALM,"amazon.com.mx":b.NA_AMAZON_REALM,"amazon.ae":b.EU_AMAZON_REALM,"amazon.com.be":b.EU_AMAZON_REALM,"amazon.co.uk":b.EU_AMAZON_REALM,"amazon.com.tr":b.EU_AMAZON_REALM,"amazon.de":b.EU_AMAZON_REALM,"amazon.eg":b.EU_AMAZON_REALM,
"amazon.es":b.EU_AMAZON_REALM,"amazon.eu":b.EU_AMAZON_REALM,"amazon.fr":b.EU_AMAZON_REALM,"amazon.in":b.EU_AMAZON_REALM,"amazon.it":b.EU_AMAZON_REALM,"amazon.nl":b.EU_AMAZON_REALM,"amazon.pl":b.EU_AMAZON_REALM,"amazon.sa":b.EU_AMAZON_REALM,"amazon.se":b.EU_AMAZON_REALM,"amazon.cn":b.CN_AMAZON_REALM,"amazon.co.jp":b.FE_AMAZON_REALM,"amazon.com.au":b.FE_AMAZON_REALM,"amazon.sg":b.FE_AMAZON_REALM})},5903:function(b,c){function a(a,b){for(var c=0;c<b.length;c++){var n=b[c];n.enumerable=n.enumerable||
!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(a,n.key,n)}}function e(b,c,k){c&&a(b.prototype,c);k&&a(b,k);Object.defineProperty(b,"prototype",{writable:!1});return b}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;b=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}e(a,[{key:"getCookieValue",value:function(a){var b,c;return 0<(null===(b=A.document)||void 0===b?void 0:null===(c=b.cookie)||void 0===
c?void 0:c.length)&&a&&(b=A.document.cookie.indexOf(a+"\x3d"),-1<b)?(b=b+a.length+1,a=A.document.cookie.indexOf(";",b),-1===a&&(a=A.document.cookie.length),decodeURIComponent(A.document.cookie.substring(b,a))):""}}]);return a}();c["default"]=b},4560:function(b,c,a){function e(a,b){for(var c=0;c<b.length;c++){var l=b[c];l.enumerable=l.enumerable||!1;l.configurable=!0;"value"in l&&(l.writable=!0);Object.defineProperty(a,l.key,l)}}function h(a,b,c){b&&e(a.prototype,b);c&&e(a,c);Object.defineProperty(a,
"prototype",{writable:!1});return a}function m(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=c.Platform=c.OS=void 0;var k=function(a){return a&&a.__esModule?a:{"default":a}}(a(942)),n;c.Platform=n;(function(a){a.Android_App="android_app";a.iOS_App="ios_app";a.Android_Browser="android_browser";a.iOS_Browser="ios_browser";a.Other="other"})(n||(c.Platform=n={}));var t;c.OS=t;(function(a){a.Android=
"android";a.iOS="ios";a.Other="other"})(t||(c.OS=t={}));b=function(){function a(){var b;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");m(this,"platformStrategy",(b={},m(b,t.iOS,{webView:n.iOS_App,browser:n.iOS_Browser}),m(b,t.Android,{webView:n.Android_App,browser:n.Android_Browser}),m(b,t.Other,{webView:n.Other,browser:n.Other}),b))}h(a,[{key:"getBrowserName",value:function(){return this.testUserAgent(/edge|edg|edgiOS|edgA/i)?"edge":this.testUserAgent(/opt|opr\//i)?
"opera":this.testUserAgent(/firefox|fxios/i)?"firefox":this.testUserAgent(/chrome|chromium|crios/i)?"chrome":this.testUserAgent(/safari/i)?"safari":"unknown"}},{key:"isRunningInWebView",value:function(){var a=(0,k["default"])(A.navigator.userAgent);a||(a=this.testUserAgent(/Amazon\.com\/\d+\.\d+/i));a||(a=this.isMacOSWebView());return a}},{key:"getOSName",value:function(){return this.determineOS()}},{key:"getPlatform",value:function(){var a=this.determineOS();return this.isRunningInWebView()?this.platformStrategy[a].webView:
this.platformStrategy[a].browser}},{key:"determineOS",value:function(){return this.isIOS()?t.iOS:this.isAndroid()?t.Android:t.Other}},{key:"testUserAgent",value:function(a){try{return a.test(A.navigator.userAgent)}catch(r){return!1}}},{key:"isIOS",value:function(){return this.testUserAgent(/OS [1-9][0-9]*(_[0-9]*)+ like Mac OS X/i)&&!this.testUserAgent(/trident|Edge/i)}},{key:"isAndroid",value:function(){return this.testUserAgent(/android.([1-9]|[L-Z])/i)&&!this.testUserAgent(/trident|Edge/i)}},{key:"isMacOSWebView",
value:function(){return this.testUserAgent(/^Mozilla.* \(Macintosh; Intel Mac OS X.*\) AppleWebKit.* \(KHTML, like Gecko\)$/)}}]);return a}();c["default"]=b},9606:function(b,c,a){Object.defineProperty(c,"__esModule",{value:!0});c["default"]=function(){return(0,e.v4)()};var e=a(5877)},4572:function(){},8190:function(b,c){function a(b){"@babel/helpers - typeof";return a="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&
"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},a(b)}function e(a,b){for(var c=0;c<b.length;c++){var l=b[c];l.enumerable=l.enumerable||!1;l.configurable=!0;"value"in l&&(l.writable=!0);Object.defineProperty(a,m(l.key),l)}}function h(a,b,c){b&&e(a.prototype,b);c&&e(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function m(b){a:if("object"===a(b)&&null!==b){var c=b[Symbol.toPrimitive];if(c!==p){b=c.call(b,"string");
if("object"!==a(b))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}b=String(b)}return"symbol"===a(b)?b:String(b)}Object.defineProperty(c,"__esModule",{value:!0});c.NativeConfigInjector=void 0;b=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.config={ios_app:{launchedApps:["com.amazon.MAPiOSLibSampleApp"]},android_app:{launchedApps:["com.amazon.map.sample.one"]}}}h(a,[{key:"getConfig",value:function(a){return this.config[a].launchedApps}},
{key:"injectNativeConfiguration",value:function(a){this.config=a}}],[{key:"getInstance",value:function(){a.instance||(a.instance=new a);return a.instance}}]);return a}();c.NativeConfigInjector=b},7127:function(b,c,a){function e(a){"@babel/helpers - typeof";return e="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?
"undefined":u(a)},e(a)}function h(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,n(d.key),d)}}function m(a,b,c){b&&h(a.prototype,b);c&&h(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function k(a,b,c){b=n(b);b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function n(a){a:if("object"===e(a)&&null!==a){var b=a[Symbol.toPrimitive];
if(b!==p){a=b.call(a,"string");if("object"!==e(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===e(a)?a:String(a)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var t=a(5792),l=a(8871),x=a(6445),r=a(6390),w=a(5906),v=a(8190),g=a(5177),d=a(7193),y=a(9629),D=a(6957);b=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");k(this,"getNativeInfoCache",w.GetNativeInfoCache.getInstance())}
m(a,[{key:"createNativePasskeyCredential",value:function(b){return new Promise(function(c,d){a.makeNativeCreateCredentialCall(c,d,{publicKey:b,timeout:a.CREATE_CREDENTIAL_TIMEOUT_MILLIS})})}},{key:"getNativePasskeyCredential",value:function(b){return new Promise(function(c,d){var g={publicKey:{rpId:b.relyingPartyId,challenge:b.challenge,userVerification:b.userVerification,timeout:b.timeout},preferImmediatelyAvailableCredentials:b.preferImmediatelyAvailableCredentials,timeout:a.GET_CREDENTIAL_TIMEOUT_MILLIS};
b.mediation?(g.mediation=b.mediation,b.autofillMode&&(g.autofillMode=b.autofillMode)):b.allowedCredentials&&(g.publicKey.allowCredentials=b.allowedCredentials);a.makeNativeGetCredentialCall(c,d,g)})}},{key:"isMobileBetaProgram",value:function(){var a=this;return new Promise(function(b,c){a.getNativeInfo().then(function(a){if(a){var c=a.platformInfo.name.toLowerCase();a=a.appInfo.identifier;c===t.AndroidConfig.platformName?b(t.AndroidConfig.mbpAppIdentifiers.includes(a)):c===t.iOSConfig.platformName&&
b(t.iOSConfig.mbpAppIdentifiers.includes(a));console.error("unknown platform")}else console.error("fail to get native info.");b(!1)})})}},{key:"isNativePasskeyAPIAvailable",value:function(a){var b=this;return new Promise(function(c,d){var v=g.MAPNativeJSInterface.getInstance().getMinVersionForFeature(g.Feature.PASSKEY,1);v?b.getNativeInfo().then(function(d){if(d){var g=d.platformInfo.name.toLowerCase(),y=d.platformInfo.version,C=d.platformInfo.isUserVerifyingPlatformAuthenticatorAvailable,l=d.mapInfo.jsVersion,
n=d.appInfo.identifier;d=d.mapInfo.mapVersion;!0!==(null===a||void 0===a?void 0:a.requireOnDeviceAuthenticatorAvailable)||C||c(!1);g===t.iOSConfig.platformName?c(b.shouldSupportPasskeyiOS(y,l,n,v,d,null===a||void 0===a?void 0:a.webAuthnNativeConfig)):g===t.AndroidConfig.platformName?c(b.shouldSupportPasskeyAndroid(y,l,n,v,null===a||void 0===a?void 0:a.webAuthnNativeConfig)):c(!1)}else c(!1)}):(console.error("getMinVersionForFeature returned null"),c(!1))})}},{key:"checkDevicePasskeyCapability",value:function(){var a=
this;return new Promise(function(b,c){a.getNativeInfo().then(function(a){a?a.platformInfo.isUserVerifyingPlatformAuthenticatorAvailable?b(y.PasskeyDeviceCapability.SUPPORTED):b(y.PasskeyDeviceCapability.UNSUPPORTED):b(y.PasskeyDeviceCapability.IGNORE)})})}},{key:"shouldSupportPasskeyiOS",value:function(a,b,c,d,g,y){return"number"===typeof a&&a<t.iOSConfig.minVersionNumber.IDENTITY_MOBILE_PASSKEY||"string"===typeof a&&(0,x.compare)(a,t.iOSConfig.minVersionString.IDENTITY_MOBILE_PASSKEY,"\x3c")||b<
d.minMAPiOSJsBridgeVersion||(0,x.compare)(g,t.iOSConfig.minMapVersion,"\x3c")?!1:y?y.ios_app.launchedApps.includes(c):v.NativeConfigInjector.getInstance().getConfig("ios_app").includes(c)}},{key:"shouldSupportPasskeyAndroid",value:function(a,b,c,d,g){return"number"===typeof a&&a<t.AndroidConfig.minVersionNumber.IDENTITY_MOBILE_PASSKEY||"string"===typeof a&&(0,x.compare)(a,t.AndroidConfig.minVersionString.IDENTITY_MOBILE_PASSKEY,"\x3c")||b<d.minMAPAndroidJsBridgeVersion?!1:g?g.android_app.launchedApps.includes(c):
v.NativeConfigInjector.getInstance().getConfig("android_app").includes(c)}},{key:"getNativeInfo",value:function(){return this.getNativeInfoCache.getNativeInfo().then(function(a){return a instanceof g.GetNativeInfoAPISuccessResponse?a:null})["catch"](function(a){console.error("Unexpected error caught: ".concat(a.error.errorCode));return null})}}],[{key:"makeNativeCreateCredentialCall",value:function(b,c,v){v=new g.NativeJsInterfaceAPIRequest(a.PASSKEY_API_NAME_SPACE,a.CREATE_CREDENTIAL_API_METHOD,
v);var y=g.MAPNativeJSInterface.getInstance(),C=(0,d.getNativeErrorHandler)();y.apiCall(v).then(function(d){d.error?c(C.translateNativeError(d.error)):b(a.createCredentialAdaptWebAuthNResponse(d.apiResult))})["catch"](function(a){console.error("Unexpected error caught: ".concat(a));c(C.translateNativeError(a))})}},{key:"makeNativeGetCredentialCall",value:function(b,c,v){v=new g.NativeJsInterfaceAPIRequest(a.PASSKEY_API_NAME_SPACE,a.GET_CREDENTIAL_API_METHOD,v);var y=g.MAPNativeJSInterface.getInstance(),
C=(0,d.getNativeErrorHandler)();y.apiCall(v).then(function(d){d.error?c(C.translateNativeError(d.error)):b(a.getCredentialAdaptWebAuthNResponse(d.apiResult))})["catch"](function(a){console.error("Unexpected error caught: ".concat(a));c(C.translateNativeError(a))})}},{key:"createCredentialAdaptWebAuthNResponse",value:function(b){var c={attestationObject:(0,l.base64UrlStringToBuffer)(b.response.attestationObject),clientDataJSON:(0,l.base64UrlStringToBuffer)(b.response.clientDataJSON),getAuthenticatorData:function(){return(0,
r.extractAuthenticatorDataFromAttestationObject)(this.attestationObject)},getPublicKey:function(){return null},getPublicKeyAlgorithm:function(){return a.COSE_ALGORITHM_IDENTIFIER},getTransports:function(){return b.response.transports}};return{id:b.id,type:b.type,rawId:(0,l.base64UrlStringToBuffer)(b.rawId),response:c,authenticatorAttachment:b.authenticatorAttachment,getClientExtensionResults:function(){return{}}}}},{key:"getCredentialAdaptWebAuthNResponse",value:function(a){if("password"===a.responseType)return{id:(0,
l.base64URLDecode)(a.response.user),password:(0,l.base64URLDecode)(a.response.password)};switch((new D.PlatformDetector).getPlatform()){case D.Platform.Android_App:var b=(0,l.base64UrlStringToBuffer)(a.response.userHandle);break;default:b=(0,l.stringToBuffer)(a.response.userHandle)}b={authenticatorData:(0,l.base64UrlStringToBuffer)(a.response.authenticatorData),clientDataJSON:(0,l.base64UrlStringToBuffer)(a.response.clientDataJSON),signature:(0,l.base64UrlStringToBuffer)(a.response.signature),userHandle:b};
return{id:a.id,rawId:(0,l.base64UrlStringToBuffer)(a.rawId),response:b,type:a.type,authenticatorAttachment:null,getClientExtensionResults:function(){return{}}}}}]);return a}();c["default"]=b;k(b,"PASSKEY_API_NAME_SPACE","IDENTITY_MOBILE_PASSKEY");k(b,"CREATE_CREDENTIAL_API_METHOD","createCredential");k(b,"GET_CREDENTIAL_API_METHOD","getCredential");k(b,"START_COUNTER","Start");k(b,"SUCCESS_COUNTER","Success");k(b,"CREATE_CREDENTIAL_TIMEOUT_MILLIS",3E5);k(b,"GET_CREDENTIAL_TIMEOUT_MILLIS",9E5);k(b,
"COSE_ALGORITHM_IDENTIFIER",-7)},9629:function(b,c){function a(b){"@babel/helpers - typeof";return a="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},a(b)}function e(a,b){for(var c=0;c<b.length;c++){var g=b[c];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,
m(g.key),g)}}function h(a,b,c){b&&e(a.prototype,b);c&&e(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function m(b){a:if("object"===a(b)&&null!==b){var c=b[Symbol.toPrimitive];if(c!==p){b=c.call(b,"string");if("object"!==a(b))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}b=String(b)}return"symbol"===a(b)?b:String(b)}function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=
Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});Object.defineProperty(a,"prototype",{writable:!1});b&&r(a,b)}function n(b){var c=x();return function(){var d=w(b);if(c){var g=w(this).constructor;d=Reflect.construct(d,arguments,g)}else d=d.apply(this,arguments);if(!d||"object"!==a(d)&&"function"!==typeof d){if(void 0!==d)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
d=this}return d}}function t(a){var b="function"===typeof Map?new Map:p;t=function(a){function c(){return l(a,arguments,w(this).constructor)}if(null===a||-1===Function.toString.call(a).indexOf("[native code]"))return a;if("function"!==typeof a)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof b){if(b.has(a))return b.get(a);b.set(a,c)}c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});return r(c,a)};
return t(a)}function l(a,b,c){l=x()?Reflect.construct.bind():function(a,b,c){var d=[null];d.push.apply(d,b);a=new (Function.bind.apply(a,d));c&&r(a,c.prototype);return a};return l.apply(null,arguments)}function x(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(v){return!1}}function r(a,b){r=Object.setPrototypeOf?Object.setPrototypeOf.bind():
function(a,b){a.__proto__=b;return a};return r(a,b)}function w(a){w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)};return w(a)}Object.defineProperty(c,"__esModule",{value:!0});c.WebAuthnNativeError=c.PasskeyDeviceCapability=c.NativeiOSGetCredentialErrorName=c.NativeiOSCreateCredentialErrorName=c.NativeAndroidGetCredentialErrorName=c.NativeAndroidCreateCredentialErrorName=void 0;b=function(a){function b(a,d,g){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
var v=c.call(this,null!==d&&void 0!==d&&d.message?d.message:null!==g&&void 0!==g&&g.mapErrorMessage?g.mapErrorMessage:"");v.name=a;v.iosErrorDetail=d;v.androidErrorDetail=g;return v}k(b,a);var c=n(b);return h(b)}(t(Error));c.WebAuthnNativeError=b;b=function(a){a.UNABLE_TO_ENROLL="UnableToEnroll";a.ENROLLMENT_CANCELLED="EnrollmentCancelled";a.ENROLLMENT_TIMEOUT="EnrollmentTimeout";a.ENROLLMENT_GENERAL_ERROR="EnrollmentGeneralError";a.ENROLLMENT_REQUEST_JSON_PARSE_FAILED="EnrollmentRequestJSONParseFailed";
a.ENROLLMENT_UNABLE_TO_VALIDATE="EnrollmentUnableToValidate";a.ENROLLMENT_CREDENTIAL_EXISTS="EnrollmentCredentialExists";a.ENROLLMENT_RE_ENROLL_CANCEL="EnrollmentReEnrollCancel";return a}({});c.NativeAndroidCreateCredentialErrorName=b;b=function(a){a.UNABLE_TO_AUTHENTICATE="UnableToAuthenticate";a.AUTHENTICATION_CANCELLED="AuthenticationCancelled";a.AUTHENTICATION_TIMEOUT="AuthenticationTimeout";a.AUTHENTICATION_GENERAL_ERROR="AuthenticationGeneralError";a.AUTHENTICATION_REQUEST_JSON_PARSE_FAILED=
"AuthenticationRequestJSONParseFailed";a.AUTHENTICATION_NO_MATCHING_CREDENTIALS="AuthenticationNoMatchedCredentials";return a}({});c.NativeAndroidGetCredentialErrorName=b;b=function(a){a.AIPasskeyRegisterErrorInputJsonParsing="AIPasskeyRegisterErrorInputJsonParsing";a.AIPasskeyRegisterErrorParsedInputJsonNil="AIPasskeyRegisterErrorParsedInputJsonNil";a.AIPasskeyRegisterErrorInputParamMissing="AIPasskeyRegisterErrorInputParamMissing";a.AIPasskeyRegisterErrorGotAssertionResponseFromSystem="AIPasskeyRegisterErrorGotAssertionResponseFromSystem";
a.AIPasskeyRegisterErrorUnexpectedResponseClassFromSystem="AIPasskeyRegisterErrorUnexpectedResponseClassFromSystem";a.AIPasskeyRegisterErrorSystem="AIPasskeyRegisterErrorSystem";return a}({});c.NativeiOSCreateCredentialErrorName=b;b=function(a){a.AIPasskeyAuthErrorInputJsonParsing="AIPasskeyAuthErrorInputJsonParsing";a.AIPasskeyAuthErrorParsedInputJsonNil="AIPasskeyAuthErrorParsedInputJsonNil";a.AIPasskeyAuthErrorInputParamMissing="AIPasskeyAuthErrorInputParamMissing";a.AIPasskeyAuthErrorGotRegisterResponseFromSystem=
"AIPasskeyAuthErrorGotRegisterResponseFromSystem";a.AIPasskeyAuthErrorUnexpectedResponseClassFromSystem="AIPasskeyAuthErrorUnexpectedResponseClassFromSystem";a.AIPasskeyAuthErrorSystem="AIPasskeyAuthErrorSystem";return a}({});c.NativeiOSGetCredentialErrorName=b;b=function(a){a.SUPPORTED="Supported";a.UNSUPPORTED="Unsupported";a.IGNORE="Ignore";return a}({});c.PasskeyDeviceCapability=b},5906:function(b,c,a){function e(a){"@babel/helpers - typeof";return e="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?
function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},e(a)}function h(a,b){for(var c=0;c<b.length;c++){var l=b[c];l.enumerable=l.enumerable||!1;l.configurable=!0;"value"in l&&(l.writable=!0);Object.defineProperty(a,k(l.key),l)}}function m(a,b,c){b&&h(a.prototype,b);c&&h(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function k(a){a:if("object"===
e(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==p){a=b.call(a,"string");if("object"!==e(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===e(a)?a:String(a)}Object.defineProperty(c,"__esModule",{value:!0});c.GetNativeInfoCache=void 0;var n=a(5177);b=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.getNativeInfoResponse=p}m(a,[{key:"getNativeInfo",value:function(){var a=this;return new Promise(function(b,
c){if(a.getNativeInfoResponse===p)n.MAPNativeJSInterface.getInstance().getNativeInfo().then(function(c){c instanceof n.GetNativeInfoAPISuccessResponse&&(a.getNativeInfoResponse=c);b(c)})["catch"](function(a){c(a)});else b(a.getNativeInfoResponse)})}},{key:"invalidateCache",value:function(){this.getNativeInfoResponse=p}}],[{key:"getInstance",value:function(){a.instance||(a.instance=new a);return a.instance}}]);return a}();c.GetNativeInfoCache=b},5792:function(b,c){Object.defineProperty(c,"__esModule",
{value:!0});c.iOSConfig=c.AndroidConfig=void 0;c.iOSConfig={platformName:"ios",minVersionNumber:{IDENTITY_MOBILE_PASSKEY:16.4,DEFAULT:12},minVersionString:{IDENTITY_MOBILE_PASSKEY:"16.4"},mbpAppIdentifiers:"com.amazon.Amazon.dev com.amazon.Amazon.Enterprise com.amazon.Amazon.development com.amazon.AmazonIN.Enterprise com.amazon.AmazonUK.Enterprise com.amazon.AmazonDE.Enterprise com.amazon.AmazonFR.Enterprise com.amazon.AmazonJP.Enterprise".split(" "),minMapVersion:"6.14.2"};c.AndroidConfig={platformName:"android",
minVersionNumber:{IDENTITY_MOBILE_PASSKEY:28,DEFAULT:16},minVersionString:{IDENTITY_MOBILE_PASSKEY:"28"},mbpAppIdentifiers:["com.amazon.mShop.android.beta","com.amazon.map.sample.one"]}},7395:function(b,c,a){function e(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"YG",{enumerable:!0,get:function(){return h.NativeAndroidCreateCredentialErrorName}});Object.defineProperty(c,"UH",{enumerable:!0,get:function(){return h.NativeAndroidGetCredentialErrorName}});Object.defineProperty(c,
"Ps",{enumerable:!0,get:function(){return k.NativeConfigInjector}});Object.defineProperty(c,"v1",{enumerable:!0,get:function(){return n["default"]}});Object.defineProperty(c,"GG",{enumerable:!0,get:function(){return h.NativeiOSCreateCredentialErrorName}});Object.defineProperty(c,"DO",{enumerable:!0,get:function(){return h.NativeiOSGetCredentialErrorName}});Object.defineProperty(c,"Hy",{enumerable:!0,get:function(){return h.PasskeyDeviceCapability}});Object.defineProperty(c,"KV",{enumerable:!0,get:function(){return h.WebAuthnNativeError}});
Object.defineProperty(c,"$_",{enumerable:!0,get:function(){return m.bufferToBase64UrlString}});var h=a(9629),m=a(8871),k=a(8190);e(a(4572));var n=e(a(7127))},7193:function(b,c,a){function e(a){"@babel/helpers - typeof";return e="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},e(a)}function h(a,
b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function m(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,n(d.key),d)}}function k(a,b,c){b&&m(a.prototype,b);c&&m(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function n(a){a:if("object"===e(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==p){a=b.call(a,"string");if("object"!==e(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");
}a=String(a)}return"symbol"===e(a)?a:String(a)}Object.defineProperty(c,"__esModule",{value:!0});c.MAPiOSErrorHandler=c.MAPAndroidErrorHandler=void 0;c.getNativeErrorHandler=function(){switch((new t.PlatformDetector).getPlatform()){case t.Platform.Android_App:return new x;case t.Platform.iOS_App:return new r;default:return{translateNativeError:function(a){return a instanceof Error?a:Error("MAP js bridge on unrecognized platform. This should never happen")}}}};var t=a(6957),l=a(9629),x=function(){function a(){h(this,
a)}k(a,[{key:"translateNativeError",value:function(a){return a instanceof Error?a:new l.WebAuthnNativeError(a.errorCode,p,{platformExceptionMessage:a.errorDetails.platformExceptionMessage,mapErrorMessage:a.errorDetails.mapErrorMessage})}}]);return a}();c.MAPAndroidErrorHandler=x;var r=function(){function a(){h(this,a)}k(a,[{key:"translateNativeError",value:function(a){return a instanceof Error?a:new l.WebAuthnNativeError(a.errorCode,{code:a.errorDetails.code,domain:a.errorDetails.domain,message:a.errorDetails.message},
p)}}]);return a}();c.MAPiOSErrorHandler=r},8871:function(b,c,a){function e(a){return Uint8Array.from(a,function(a){return a.charCodeAt(0)}).buffer}Object.defineProperty(c,"__esModule",{value:!0});c.base64URLDecode=function(a){a=a.replace(/-/g,"+").replace(/_/g,"/");return A.atob(a)};c.base64UrlStringToBuffer=function(a){return e(A.atob(a.replace(/-/g,"+").replace(/_/g,"/")))};c.bufferToBase64UrlString=function(a){return h.Base64UrlEncodingHelper.bufferToBase64UrlString(a)};c.stringToBuffer=e;var h=
a(5177)},6810:function(b,c){function a(b){"@babel/helpers - typeof";return a="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},a(b)}Object.defineProperty(c,"__esModule",{value:!0});c.decode=function(a,b,c){function l(a,b){C+=b;return a}function n(b){return l(new Uint8Array(a,C,b),b)}function k(){return l(D.getUint8(C),
1)}function t(){if(255!==D.getUint8(C))return!1;C+=1;return!0}function v(a){if(24>a)return a;if(24===a)return k();if(25===a)return l(D.getUint16(C),2);if(26===a)return l(D.getUint32(C),4);if(27===a)return l(D.getUint32(C),4)*h+l(D.getUint32(C),4);if(31===a)return-1;throw"Invalid length encoding";}function g(a){var b=k();if(255===b)return-1;var c=v(b&31);if(0>c||b>>5!==a)throw"Invalid indefinite length element";return c}function d(a,b){for(var c=0;c<b;++c){var d=k();d&128&&(224>d?(d=(d&31)<<6|k()&
63,--b):240>d?(d=(d&15)<<12|(k()&63)<<6|k()&63,b-=2):(d=(d&15)<<18|(k()&63)<<12|(k()&63)<<6|k()&63,b-=3));65536>d?a.push(d):(d-=65536,a.push(55296|d>>10),a.push(56320|d&1023))}}function y(){var a=k(),h=a>>5;a&=31;if(7===h)switch(a){case 25:a:{h=new ArrayBuffer(4);h=new DataView(h);a=l(D.getUint16(C),2);var m=a&31744,r=a&1023;if(31744===m)m=261120;else if(0!==m)m+=114688;else if(0!==r){h=r*e;break a}h.setUint32(0,(a&32768)<<16|m<<13|r<<13);h=h.getFloat32(0)}return h;case 26:return l(D.getFloat32(C),
4);case 27:return l(D.getFloat64(C),8)}a=v(a);if(0>a&&(2>h||6<h))throw"Invalid length";switch(h){case 0:return a;case 1:return-1-a;case 2:if(0>a){m=[];for(r=0;0<=(a=g(h));)r+=a,m.push(n(a));a=new Uint8Array(r);for(h=r=0;h<m.length;++h){var w=new Uint8Array(m[h]);a.set(w,r);r+=w.length}return a}return n(a);case 3:m=[];if(0>a)for(;0<=(a=g(h));)d(m,a);else d(m,a);return String.fromCharCode.apply(null,m);case 4:if(0>a)for(m=[];!t();)m.push(y());else for(m=Array(a),h=0;h<a;++h)m[h]=y();return m;case 5:m=
{};for(h=0;h<a||0>a&&!t();++h)r=y(),m[r]=y();return m;case 6:return b(y());case 7:switch(a){case 20:return!1;case 21:return!0;case 22:return null;case 23:return p;default:return c()}}}var D=new DataView(a),C=0;"function"!==typeof b&&(b=function(a){return a});"function"!==typeof c&&(c=function(){return p});var m=y();if(C!==a.byteLength)throw"Remaining bytes";return m};c.encode=function(b){function c(a){for(var b=w.byteLength,c=d+a;b<c;)b*=2;if(b!==w.byteLength){c=v;w=new ArrayBuffer(b);v=new DataView(w);
b=d+3>>2;for(var y=0;y<b;++y)v.setUint32(4*y,c.getUint32(4*y))}g=a;return v}function k(a){c(1).setUint8(d,a);d+=g}function l(a){for(var b=c(a.length),y=0;y<a.length;++y)b.setUint8(d+y,a[y]);d+=g}function e(a,b){if(24>b)k(a<<5|b);else if(256>b)k(a<<5|24),k(b);else{if(65536>b)k(a<<5|25),c(2).setUint16(d,b);else if(4294967296>b)k(a<<5|26),c(4).setUint32(d,b);else{k(a<<5|27);a=b%h;b=(b-a)/h;var y=c(8);y.setUint32(d,b);y.setUint32(d+4,a)}d+=g}}function r(b){var y;if(!1===b)return k(244);if(!0===b)return k(245);
if(null===b)return k(246);if(b===p)return k(247);switch(a(b)){case "number":if(Math.floor(b)===b){if(0<=b&&b<=m)return e(0,b);if(-m<=b&&0>b)return e(1,-(b+1))}k(251);c(8).setFloat64(d,b);d+=g;break;case "string":var v=[];for(y=0;y<b.length;++y){var h=b.charCodeAt(y);128>h?v.push(h):(2048>h?v.push(192|h>>6):(55296>h?v.push(224|h>>12):(b.charCodeAt(++y),v.push(240|h>>18),v.push(128|h>>12&63)),v.push(128|h>>6&63)),v.push(128|h&63))}e(3,v.length);return l(new Uint8Array(v));default:if(Array.isArray(b))for(v=
b.length,e(4,v),y=0;y<v;++y)r(b[y]);else if(b instanceof Uint8Array)e(2,b.length),l(b);else if(b instanceof ArrayBuffer)b=new Uint8Array(b),e(2,b.length),l(b);else for(h=Object.keys(b),v=h.length,e(5,v),y=0;y<v;++y){var n=h[y];r(n);r(b[n])}}}var w=new ArrayBuffer(256),v=new DataView(w),g,d=0;r(b);if("slice"in w)return w.slice(0,d);b=new ArrayBuffer(d);for(var y=new DataView(b),D=0;D<d;++D)y.setUint8(D,v.getUint8(D));return b};var e=Math.pow(2,-24),h=Math.pow(2,32),m=Math.pow(2,53)},6390:function(b,
c,a){Object.defineProperty(c,"__esModule",{value:!0});c.extractAuthenticatorDataFromAttestationObject=function(a){return(0,e.decode)(a).authData};var e=a(6810)},7609:function(b,c,a){function e(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));c.push.apply(c,d)}return c}function h(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?e(Object(c),
!0).forEach(function(b){(0,g.default)(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):e(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function m(a){var b=k();return function(){var c=(0,r.default)(a);if(b){var d=(0,r.default)(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,arguments);return(0,x.default)(this,c)}}function k(){if("undefined"===typeof Reflect||
!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(va){return!1}}var n=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c.KatalMetricsDriverSushi=void 0;var t=n(a(6115)),l=n(a(1655)),x=n(a(4993)),r=n(a(3808)),w=n(a(6690)),v=n(a(9728)),g=n(a(8416));b=n(a(4864));var d=n(a(2952)),y=n(a(4873)),D={test:"com.amazon.eel.katal.metrics.core.nexus.gamma",prod:"com.amazon.eel.katal.metrics.core.nexus"};
a=function(){function a(){(0,w.default)(this,a);(0,g.default)(this,"context",{})}(0,v.default)(a,[{key:"withSushiClient",value:function(a){console.log("withSushi client...");this.context.sushiClient=a;return this}},{key:"withDomainRealm",value:function(a,b){this.context.domain=a;this.context.realm=b;return this}},{key:"withCustomProducer",value:function(a){this.context.sushiProducer=a;return this}},{key:"withCustomSourceGroup",value:function(a){this.context.sourceGroupId=a;return this}},{key:"withErrorHandler",
value:function(a){this.context.errorHandler=a;return this}},{key:"withSushiClientOptions",value:function(a){this.context.sushiClientOptions=a;return this}},{key:"withSushiClientTransportOverride",value:function(a){this.context.sushiClientTransportOverride=a;return this}},{key:"build",value:function(){return new C(this.context)}}]);return a}();var C=function(a){function b(a){(0,w.default)(this,b);var d=c.call(this);(0,g.default)((0,t.default)(d),"sushi",void 0);(0,g.default)((0,t.default)(d),"producerId",
void 0);(0,g.default)((0,t.default)(d),"sourceGroupId",void 0);(0,g.default)((0,t.default)(d),"errorHandler",void 0);(0,g.default)((0,t.default)(d),"combinedErrorHandler",function(a){if(d.errorHandler)try{d.errorHandler(a);return}catch(L){console.error("Error handling error publishing metrics:"),console.error(L)}d.defaultErrorHandler(a)});var y=a.domain,l=a.realm,v=a.errorHandler,k=a.sushiProducer;k=void 0===k?"katal":k;var h=a.sushiClientOptions,e=a.sushiClientTransportOverride,n=a.sourceGroupId||
D[y]||D.test;d.sushi=a.sushiClient||d.buildSushiClient(y,l,n,h,e);d.errorHandler=v;d.producerId=k;d.sourceGroupId=n;return d}(0,l.default)(b,a);var c=m(b);(0,v.default)(b,[{key:"beforeUnload",value:function(a){this.sushi.onSushiUnload(a)}},{key:"defaultErrorHandler",value:function(a){console.error("Error publishing metrics:");console.error(a)}},{key:"withErrorHandling",value:function(a){try{return a()}catch(wa){this.combinedErrorHandler(wa)}}},{key:"buildSushiClient",value:function(a,c,d,g,l){if(!a||
!c)throw Error("KatalMetricsDriverSushi requires a domain and realm to build a sushi client.");return new y.default(b.getRealmName(c),d,this.combinedErrorHandler,g,l)}},{key:"publish",value:function(a,b,c){var g=this,y=3>arguments.length?arguments[1]:arguments[2];this.withErrorHandling(function(){if(d.default.List===a.type)a.metricList.forEach(function(a){g.publish(a,y)});else{var b=g.mapObjectTypeToNexusSchema(a.type),c=h(h({},y.context),{},{metricKey:a.name,value:a.value});a.isMonitor&&(c.isMonitor=
!0);c.cloudWatchDimensions&&delete c.cloudWatchDimensions;g.sushi.reset();g.sushi.event(c,g.producerId,b,{ssd:1})}})}},{key:"mapObjectTypeToNexusSchema",value:function(a){switch(a){case d.default.String:return"katal.client.metrics.String.2";case d.default.Counter:return"katal.client.metrics.Counter.3";case d.default.Timer:return"katal.client.metrics.Timer.2";default:throw Error("Unknown type ".concat(a," when publishing metric object."));}}}],[{key:"getRealmName",value:function(a){switch(a){case "NAAmazon":case "USAmazon":return y.default.REGIONS.NA;
case "EUAmazon":return y.default.REGIONS.EU;case "FEAmazon":case "JPAmazon":return y.default.REGIONS.FE;case "CNAmazon":return y.default.REGIONS.CN;default:return a}}}]);return b}(b.default);c.KatalMetricsDriverSushi=C;(0,g.default)(C,"Builder",a)},8277:function(b,c,a){Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;a(6470);b=a(7609).KatalMetricsDriverSushi;c["default"]=b},7700:function(b,c,a){function e(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);
b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));c.push.apply(c,d)}return c}function h(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?e(Object(c),!0).forEach(function(b){(0,n.default)(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):e(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}b=a(4836);Object.defineProperty(c,
"__esModule",{value:!0});c["default"]=void 0;var m=b(a(6690)),k=b(a(9728)),n=b(a(8416)),t=b(a(1051)),l=b(a(5292)),x=b(a(2721)),r=a(8184),w=a(1582),v=["site","serviceName","methodName"],g=function(){function a(){var b=0<arguments.length&&arguments[0]!==p?arguments[0]:{};(0,m.default)(this,a);this.context=h({},b)}(0,k.default)(a,[{key:"merge",value:function(b){if(!b)return this;if(b instanceof a.Builder)throw Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");
b=b instanceof a?b.context:b;b=h(h(h({},this.context),b),{},{relatedMetrics:(0,r.mergeLists)(this.context.relatedMetrics,b.relatedMetrics),relatedMetricsSingleAction:(0,r.mergeLists)(this.context.relatedMetricsSingleAction,b.relatedMetricsSingleAction),cloudWatchDimensions:(0,r.mergeLists)(this.context.cloudWatchDimensions,b.cloudWatchDimensions)});return new a(b)}},{key:"withoutRelatedMetricsSingleAction",value:function(){return new a(h(h({},this.context),{},{relatedMetricsSingleAction:p}))}},{key:"driverContext",
value:function(){var b=h({},this.context);delete b.relatedMetrics;delete b.relatedMetricsSingleAction;delete b.requestId;this.context.requestId&&(b.actionId=(0,w.embedRequestId)(b.actionId,this.context.requestId));return new a(b)}},{key:"getFields",value:function(){return h({},this.context)}},{key:"validationError",value:function(){var a=this,b;return(b=(0,x.default)(v,function(b){if(a.context[b]==p)return Error("Field ".concat(b," is required, but it is ").concat(a.context[b]))}))?b:(0,x.default)(Object.keys(this.context),
function(b){return a.validateField(b)})}},{key:"validateField",value:function(a){var b=this.context[a],c="field ".concat(a);switch(a){case "site":case "serviceName":if(-1<b.indexOf("/"))return Error("Expected ".concat(c," to contain only valid characters, but it was ").concat(b,".  It cannot contain a slash."));case "methodName":case "actionId":return(0,t.default)(b,c);case "cloudWatchDimensions":return(0,l.default)(b||[])}}}]);return a}();c["default"]=g;(0,n.default)(g,"Builder",function(){function a(){(0,
m.default)(this,a);(0,n.default)(this,"context",{})}(0,k.default)(a,[{key:"withSite",value:function(a){this.context.site=a;return this}},{key:"withServiceName",value:function(a){this.context.serviceName=a;return this}},{key:"withMethodName",value:function(a){this.context.methodName=a;return this}},{key:"withActionId",value:function(a){this.context.actionId=a;return this}},{key:"withRequestId",value:function(a){this.context.requestId=a;return this}},{key:"withCloudWatchDimensions",value:function(a){this.context.cloudWatchDimensions=
a;return this}},{key:"withRelatedMetrics",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];this.context.relatedMetrics=b;return this}},{key:"addRelatedMetrics",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];this.context.relatedMetrics=(0,r.mergeLists)(this.context.relatedMetrics,b);return this}},{key:"withRelatedMetricsSingleAction",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];this.context.relatedMetricsSingleAction=
b;return this}},{key:"addRelatedMetricsSingleAction",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];this.context.relatedMetricsSingleAction=(0,r.mergeLists)(this.context.relatedMetricsSingleAction,b);return this}},{key:"build",value:function(){return new g(this.context)}}]);return a}())},8142:function(b,c,a){b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var e=b(a(6690)),h=b(a(9728)),m=b(a(8416)),k=b(a(1171)),n=b(a(7700)),t=a(5607),
l=a(8184),x=a(5742),r=a(1582),w=function(a){console.error("Error publishing metrics:");console.error(a)};a=function(){function a(b){var c=this,g=1<arguments.length&&arguments[1]!==p?arguments[1]:w,l=2<arguments.length&&arguments[2]!==p?arguments[2]:new n.default;(0,e.default)(this,a);(0,m.default)(this,"combinedErrorHandler",function(a){try{c.errorHandler(a)}catch(va){console.error("Error handling error publishing metrics:"),console.error(va),w(a)}});if(l instanceof n.default.Builder)throw Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");
this.driver=b;this.errorHandler=g;this.context=l instanceof n.default?l:new n.default(l)}(0,h.default)(a,[{key:"withErrorHandling",value:function(a){try{return a()}catch(d){this.combinedErrorHandler(d)}}},{key:"getAdditionalRelatedMetrics",value:function(a){a=a instanceof n.default?a.context:a;var b=this.getBaseRelatedMetrics();return(0,l.mergeLists)(b,a.relatedMetrics)}},{key:"getBaseRelatedMetrics",value:function(){return(0,l.mergeLists)(this.context.context.relatedMetrics,this.context.context.relatedMetricsSingleAction)}},
{key:"publish",value:function(a){var b=this;this.withErrorHandling(function(){if(!a)throw Error("Cannot publish undefined/null metric object");if(t.Object.Types.List===a.type)a.metricList.forEach(function(a){b.publish(a)});else{var c=b.context.driverContext(),d=c.validationError();if(d)throw d;if(d=a.validationError())throw d;(0,x.dispatchMetricEvent)(a,c);b.driver.publish(a,c)}})}},{key:"newChildPublisher",value:function(b){return new a(this.driver,this.errorHandler,this.context.merge(b))}},{key:"newChildActionPublisher",
value:function(b){var c=this._generateActionid(b);c=this.context.withoutRelatedMetricsSingleAction().merge({actionId:c}).merge(b);var g=new a(this.driver,this.errorHandler,c);(b=!b||b instanceof n.default.Builder?this.getBaseRelatedMetrics():this.getAdditionalRelatedMetrics(b))&&b.forEach(function(a){g.publish(a)});return g}},{key:"newChildActionPublisherChained",value:function(a){var b=this._generateActionid(a),c=(0,r.embedRequestId)(b,this.context.context.requestId);c=[new t.String("parentActionId",
c)];a=(new n.default({actionId:b,relatedMetricsSingleAction:c})).merge(a);return this.newChildActionPublisher(a)}},{key:"newChildActionPublisherChainedForMethod",value:function(a,b){return this.newChildActionPublisherChained((new n.default({methodName:a})).merge(b))}},{key:"newChildActionPublisherForMethod",value:function(a,b){return this.newChildActionPublisher((new n.default({methodName:a})).merge(b))}},{key:"newChildActionPublisherForInitialization",value:function(a){return this.newChildActionPublisherForMethod("Initialization",
a)}},{key:"publishString",value:function(a,b){this.publish(new t.String(a,b))}},{key:"publishStringTruncate",value:function(a,b){a=new t.String(a,b);a.truncate=!0;this.publish(a)}},{key:"publishCounter",value:function(a,b){this.publish(new t.Counter(a,b))}},{key:"publishTimer",value:function(a,b){this.publish(new t.Timer(a,b))}},{key:"publishCounterMonitor",value:function(a,b){this.publish((new t.Counter(a,b)).withMonitor())}},{key:"publishTimerMonitor",value:function(a,b){this.publish((new t.Timer(a,
b)).withMonitor())}},{key:"_generateActionid",value:function(a){return a&&(a=a.context?a.context:a,a.actionId)?a.actionId:(0,k.default)()}}]);return a}();c["default"]=a},5274:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c.DEFAULT_ERROR_HANDLER=void 0;c.DEFAULT_ERROR_HANDLER=function(a){throw a;}},4864:function(b,c,a){b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var e=b(a(6690)),h=b(a(9728));a=function(){function a(){(0,e.default)(this,a)}(0,h.default)(a,
[{key:"publish",value:function(a,b){throw Error("KatalMetricsDriver is an abstract class, please choose a driver and use that instead");}}]);return a}();c["default"]=a},2721:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c["default"]=function(a,b){var c=p;a.some(function(a){c=b(a);return null!=c});return c}},469:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;c["default"]=Object.values?Object.values:function(a){return Object.keys(a).map(function(b){return a[b]})}},
8059:function(b,c,a){b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=function(a,b){if("number"!==typeof a)return Error("Expected ".concat(b," to have type 'number', but it was type '").concat((0,e.default)(a),"'"));if(0>a)return Error("Expected ".concat(b," to be positive, but it was ").concat(a));if(!isFinite(a)||Math.floor(a)!==a)return Error("Expected ".concat(b," to be an integer, but it was ").concat(a))};var e=b(a(8698))},1051:function(b,c,a){b=a(4836);Object.defineProperty(c,
"__esModule",{value:!0});c["default"]=function(a,b){if("string"!==typeof a)return Error("Expected ".concat(b," to be a string, but it was a ").concat((0,e.default)(a)));if(a.length>m)return Error("Expected ".concat(b," to be less than ").concat(m," characters, but it was ").concat(a.length," characters"));if(1>a.length)return Error("Expected ".concat(b," to be non-blank"));if(!h.test(a))return Error("Expected ".concat(b," to contain only valid characters, but it was ").concat(a,".  It can only contain letters, numbers, and these symbols: .:@_/-"))};
var e=b(a(8698)),h=/^[A-Za-z0-9.:@_/-]+$/,m=127},1582:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c.embedRequestId=function(a,b){return b?[b,a].join("::"):a}},8184:function(b,c,a){b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c.mergeLists=function(a,b){return a||b?[].concat((0,e.default)(a||[]),(0,e.default)(b||[])):p};var e=b(a(861))},5742:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c.dispatchMetricEvent=function(a,b){if("undefined"!==typeof A){if("function"===
typeof CustomEvent){var c=new CustomEvent("katal.metrics.publish",{detail:{metric:a,context:b.getFields()}});A.dispatchEvent(c)}(c=A.__KATAL_METRICS_EXTENSION__)&&c.publish(a,b.getFields())}}},5292:function(b,c,a){function e(a,b){if(a.length>n)return Error("Expected Dimension name for value ".concat(b," to be ").concat(n," characters or less, but it was ").concat(a.length," characters"));if(1>a.length)return Error("Expected Dimension name for value ".concat(b," to be non-blank"));if(!m.test(a))return Error("Expected Dimension name for value ".concat(b,
" to contain only ASCII characters, but it was ").concat(a));if(!k.test(a))return Error("Expected Dimension name for value ".concat(b," to contain at least one non whitespace character, but it was ").concat(a));if(a.startsWith(":"))return Error("Expected Dimension name for value ".concat(b,' to not start with a colon (":"), but it was ').concat(a));if(b.length>t)return Error("Expected Dimension value for name ".concat(a," to be ").concat(t," characters or less, but it was ").concat(b.length," characters"));
if(1>b.length)return Error("Expected Dimension value for name ".concat(a," to be non-blank"));if(!m.test(b))return Error("Expected Dimension value for name ".concat(a," to contain only ASCII characters, but it was ").concat(b));if(!k.test(b))return Error("Expected Dimension value for name ".concat(a," to contain at least one non whitespace character, but it was ").concat(b,"}"))}b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=function(a){return(0,h.default)(a,function(a){return e(a.name,
a.value)})};var h=b(a(2721)),m=/^[\x20-\x7E]+$/,k=/^.*\S+.*$/,n=255,t=1024},5989:function(b,c,a){function e(a){if("function"!==typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(e=function(a){return a?c:b})(a)}b=a(4836);var h=a(8698);Object.defineProperty(c,"__esModule",{value:!0});Object.defineProperty(c,"CloudWatchDimensions",{enumerable:!0,get:function(){return p.CloudWatchDimensions}});Object.defineProperty(c,"Context",{enumerable:!0,get:function(){return n.default}});Object.defineProperty(c,
"ErrorHandler",{enumerable:!0,get:function(){return l.ErrorHandler}});c.Metric=void 0;Object.defineProperty(c,"MetricsDriver",{enumerable:!0,get:function(){return t.default}});Object.defineProperty(c,"Publisher",{enumerable:!0,get:function(){return k.default}});var m=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!==h(a)&&"function"!==typeof a)return{default:a};if((b=e(b))&&b.has(a))return b.get(a);var c={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,d;for(d in a)if("default"!==
d&&Object.prototype.hasOwnProperty.call(a,d)){var y=g?Object.getOwnPropertyDescriptor(a,d):null;y&&(y.get||y.set)?Object.defineProperty(c,d,y):c[d]=a[d]}c.default=a;b&&b.set(a,c);return c}(a(5607));c.Metric=m;var k=b(a(8142)),n=b(a(7700)),t=b(a(4864)),l=a(5274),p=a(1128)},199:function(b,c,a){function e(a){var b=h();return function(){var c=(0,x.default)(a);if(b){var g=(0,x.default)(this).constructor;c=Reflect.construct(c,arguments,g)}else c=c.apply(this,arguments);return(0,l.default)(this,c)}}function h(){if("undefined"===
typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(v){return!1}}b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var m=b(a(6690)),k=b(a(9728)),n=b(a(1588)),t=b(a(1655)),l=b(a(4993)),x=b(a(3808)),r=b(a(8116)),w=b(a(8059));a=function(a){function b(a){var d=1<arguments.length&&arguments[1]!==p?arguments[1]:0;(0,m.default)(this,
b);var g=c.call(this,a);g.value=d;return g}(0,t.default)(b,a);var c=e(b);(0,k.default)(b,[{key:"value",get:function(){return this._value},set:function(a){this._value=Math.round(a)}},{key:"type",get:function(){return r.default.Types.Counter}},{key:"add",value:function(a){this.value+=a}},{key:"canMonitor",get:function(){return!0}},{key:"validationError",value:function(){var a=(0,n.default)((0,x.default)(b.prototype),"validationError",this).call(this);return a?a:(0,w.default)(this.value,"field value in Counter metrics object '".concat(this.name,
"'"))}}]);return b}(r.default);c["default"]=a},6673:function(b,c,a){function e(a){var b=h();return function(){var c=(0,p.default)(a);if(b){var g=(0,p.default)(this).constructor;c=Reflect.construct(c,arguments,g)}else c=c.apply(this,arguments);return(0,l.default)(this,c)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(v){return!1}}
var m=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var k=m(a(6690)),n=m(a(9728)),t=m(a(1655)),l=m(a(4993)),p=m(a(3808));b=m(a(8416));var r=m(a(4053)),w=m(a(2545));a=function(a){function b(a){(0,k.default)(this,b);return c.call(this,"".concat(b.HTTP_REQUEST_PREFIX,".").concat(a))}(0,t.default)(b,a);var c=e(b);(0,n.default)(b,[{key:"url",get:function(){return this.getNamedMetricValue(b.URL_SUFFIX)},set:function(a){this.setOrDeleteNamedMetricValue(b.URL_SUFFIX,w.default,
a)}},{key:"urlMetric",get:function(){return this.getNamedMetric(b.URL_SUFFIX)}},{key:"statusCode",get:function(){return this.getNamedMetricValue(b.STATUS_CODE_SUFFIX)},set:function(a){this.setOrDeleteNamedMetricValue(b.STATUS_CODE_SUFFIX,w.default,a)}},{key:"statusCodeMetric",get:function(){return this.getNamedMetric(b.STATUS_CODE_SUFFIX)}},{key:"statusText",get:function(){return this.getNamedMetricValue(b.STATUS_TEXT_SUFFIX)},set:function(a){this.setOrDeleteNamedMetricValue(b.STATUS_TEXT_SUFFIX,
w.default,a)}},{key:"statusTextMetric",get:function(){return this.getNamedMetric(b.STATUS_TEXT_SUFFIX)}}]);return b}(r.default);c["default"]=a;(0,b.default)(a,"HTTP_REQUEST_PREFIX","HTTPRequest");(0,b.default)(a,"URL_SUFFIX","URL");(0,b.default)(a,"STATUS_CODE_SUFFIX","StatusCode");(0,b.default)(a,"STATUS_TEXT_SUFFIX","StatusText")},21:function(b,c,a){function e(a){var b=h();return function(){var c=(0,l.default)(a);if(b){var k=(0,l.default)(this).constructor;c=Reflect.construct(c,arguments,k)}else c=
c.apply(this,arguments);return(0,t.default)(this,c)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(x){return!1}}var m=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var k=m(a(6690)),n=m(a(1655)),t=m(a(4993)),l=m(a(3808));b=m(a(8416));a=function(a){function b(){(0,k.default)(this,b);return c.call(this,
b.INITIALIZE_METRIC_NAME)}(0,n.default)(b,a);var c=e(b);return b}(m(a(4053)).default);c["default"]=a;(0,b.default)(a,"INITIALIZE_METRIC_NAME","Initialization")},8981:function(b,c,a){function e(a){var b=h();return function(){var c=(0,l.default)(a);if(b){var d=(0,l.default)(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,arguments);return(0,t.default)(this,c)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;
try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(w){return!1}}b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var m=b(a(6690)),k=b(a(9728)),n=b(a(1655)),t=b(a(4993)),l=b(a(3808)),x=b(a(124)),r=b(a(469));a=function(a){function b(a){(0,m.default)(this,b);a=c.call(this,a);a.namedMetrics={};return a}(0,n.default)(b,a);var c=e(b);(0,k.default)(b,[{key:"metricList",get:function(){return(0,r.default)(this.namedMetrics)}},{key:"setNamedMetric",
value:function(a,b){var c=this.getNameForSubMetric(a);b=b(c);b.canMonitor&&(b.isMonitor=this.isMonitor);this.namedMetrics[a]=b}},{key:"setOrDeleteNamedMetricValue",value:function(a,b,c){c==p?this.deleteNamedMetric(a):this.getOrCreateNamedMetric(a,function(a){return new b(a,c)}).value=c}},{key:"getOrCreateNamedMetric",value:function(a,b){this.namedMetrics[a]||this.setNamedMetric(a,b);return this.namedMetrics[a]}},{key:"getNamedMetric",value:function(a){return this.namedMetrics[a]}},{key:"deleteNamedMetric",
value:function(a){delete this.namedMetrics[a]}},{key:"getNamedMetricValue",value:function(a){return(a=this.getNamedMetric(a))?a.value:p}},{key:"getNameForSubMetric",value:function(a){return"".concat(this.name,".").concat(a)}}]);return b}(x.default);c["default"]=a},8116:function(b,c,a){var e=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var h=e(a(8698)),m=e(a(6690)),k=e(a(9728));b=e(a(8416));var n=e(a(1051));a=e(a(2952));e=function(){function a(b){(0,m.default)(this,
a);this._name=b;this._isMonitor=!1}(0,k.default)(a,[{key:"name",get:function(){return this._name}},{key:"metricKey",get:function(){return this._name}},{key:"withMonitor",value:function(){this.isMonitor=0<arguments.length&&arguments[0]!==p?arguments[0]:!0;return this}},{key:"isMonitor",get:function(){return this._isMonitor},set:function(a){this._isMonitor=!!a}},{key:"canMonitor",get:function(){throw Error("Subclass of KatalMetricObject must implement canMonitor");}},{key:"type",get:function(){throw Error("Subclass of KatalMetricObject must implement type getter");
}},{key:"validationError",value:function(){return this.isMonitor!==p&&"boolean"!==typeof this.isMonitor?Error("Field isMonitor should be a boolean, but it was a ".concat((0,h.default)(this.isMonitor))):(0,n.default)(this.name,"field name")}}]);return a}();c["default"]=e;(0,b.default)(e,"Types",a.default)},124:function(b,c,a){function e(a){var b=h();return function(){var c=(0,r.default)(a);if(b){var d=(0,r.default)(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,arguments);
return(0,p.default)(this,c)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(g){return!1}}b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var m=b(a(6690)),k=b(a(9728)),n=b(a(1588)),t=b(a(3788)),l=b(a(1655)),p=b(a(4993)),r=b(a(3808)),w=b(a(8116)),v=b(a(2721));a=function(a){function b(a){(0,
m.default)(this,b);return c.call(this,a)}(0,l.default)(b,a);var c=e(b);(0,k.default)(b,[{key:"metricList",get:function(){throw Error("Subclass of KatalMetricObjectList must implement metricList getter");}},{key:"isMonitor",get:function(){return(0,n.default)((0,r.default)(b.prototype),"isMonitor",this)},set:function(a){(0,t.default)((0,r.default)(b.prototype),"isMonitor",a,this,!0);this.metricList.forEach(function(b){b.canMonitor&&(b.isMonitor=a)})}},{key:"canMonitor",get:function(){return!0}},{key:"type",
get:function(){return w.default.Types.List}},{key:"validationError",value:function(){return(0,v.default)(this.metricList,function(a){return a.validationError()})}}]);return b}(w.default);c["default"]=a},2545:function(b,c,a){function e(a){var b=h();return function(){var c=(0,w.default)(a);if(b){var d=(0,w.default)(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,arguments);return(0,r.default)(this,c)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;
if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(d){return!1}}b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var m=b(a(8698)),k=b(a(6690)),n=b(a(9728)),t=b(a(6115)),l=b(a(1588)),p=b(a(1655)),r=b(a(4993)),w=b(a(3808)),v=b(a(8416)),g=b(a(8116));a=function(a){function b(a,d){(0,k.default)(this,b);a=c.call(this,a);(0,v.default)((0,t.default)(a),"truncate",!1);a.value=d;return a}(0,p.default)(b,
a);var c=e(b);(0,n.default)(b,[{key:"value",get:function(){return this._value},set:function(a){if("number"===typeof a||"boolean"===typeof a)a=a.toString();this._value=a}},{key:"type",get:function(){return g.default.Types.String}},{key:"canMonitor",get:function(){return!1}},{key:"validationError",value:function(){var a=(0,l.default)((0,w.default)(b.prototype),"validationError",this).call(this);if(a)return a;if("string"!==typeof this.value)return Error("Expected field value in String metrics object '".concat(this.name,
"' to be type string, but it was ").concat((0,m.default)(this.value)));if(this.value.length>b.MAX_SIZE)if(this.truncate)this.value=this.value.substring(0,b.MAX_SIZE);else return Error("Expected field value in String metrics object '".concat(this.name,"' to be ").concat(b.MAX_SIZE," characters or less, but it was ").concat(this.value.length," characters."))}}]);return b}(g.default);c["default"]=a;(0,v.default)(a,"MAX_SIZE",256)},4053:function(b,c,a){function e(a){var b=h();return function(){var c=
(0,x.default)(a);if(b){var d=(0,x.default)(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,arguments);return(0,l.default)(this,c)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(g){return!1}}var m=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var k=m(a(6690)),n=
m(a(9728)),t=m(a(1655)),l=m(a(4993)),x=m(a(3808));b=m(a(8416));var r=m(a(8981)),w=m(a(4392)),v=m(a(199));a=function(a){function b(a){(0,k.default)(this,b);a=c.call(this,a);a.setNamedMetric(b.LATENCY_SUFFIX,function(a){return new w.default(a)});a.setNamedMetric(b.FAILURE_SUFFIX,function(a){return new v.default(a,1)});return a}(0,t.default)(b,a);var c=e(b);(0,n.default)(b,[{key:"setFailure",value:function(){this.failureMetric.value=(0<arguments.length&&arguments[0]!==p?arguments[0]:1)?1:0}},{key:"setSuccess",
value:function(){this.setFailure(!1)}},{key:"setLatency",value:function(a){this.latencyMetric.value=a}},{key:"latencyMetric",get:function(){return this.getNamedMetric(b.LATENCY_SUFFIX)}},{key:"failureMetric",get:function(){return this.getNamedMetric(b.FAILURE_SUFFIX)}}]);return b}(r.default);c["default"]=a;(0,b.default)(a,"LATENCY_SUFFIX","Latency");(0,b.default)(a,"FAILURE_SUFFIX","Failure")},1741:function(b,c,a){function e(a){var b=h();return function(){var c=(0,x.default)(a);if(b){var g=(0,x.default)(this).constructor;
c=Reflect.construct(c,arguments,g)}else c=c.apply(this,arguments);return(0,l.default)(this,c)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(v){return!1}}b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var m=b(a(6690)),k=b(a(9728)),n=b(a(1588)),t=b(a(1655)),l=b(a(4993)),x=b(a(3808)),r=
b(a(8116)),w=b(a(8059));a=function(a){function b(a,d){(0,m.default)(this,b);a=c.call(this,a);a.value=d;return a}(0,t.default)(b,a);var c=e(b);(0,k.default)(b,[{key:"value",get:function(){return this._value},set:function(a){this._value=a==p?a:Math.round(a)}},{key:"type",get:function(){return r.default.Types.Timer}},{key:"canMonitor",get:function(){return!0}},{key:"validationError",value:function(){var a=(0,n.default)((0,x.default)(b.prototype),"validationError",this).call(this);return a?a:(0,w.default)(this.value,
"field value in Timer metrics object '".concat(this.name,"'"))}}]);return b}(r.default);c["default"]=a},4392:function(b,c,a){function e(a){var b=h();return function(){var c=(0,r.default)(a);if(b){var d=(0,r.default)(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,arguments);return(0,x.default)(this,c)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,
[],function(){})),!0}catch(w){return!1}}b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var m=b(a(6690)),k=b(a(9728)),n=b(a(3788)),t=b(a(1588)),l=b(a(1655)),x=b(a(4993)),r=b(a(3808));a=function(a){function b(a,g){(0,m.default)(this,b);a=c.call(this,a,p);a.start(g);a._value=p;return a}(0,l.default)(b,a);var c=e(b);(0,k.default)(b,[{key:"start",value:function(a){this._startTime=a||this.now()}},{key:"stop",value:function(a){return this._stopTime=a||this.now()}},{key:"isStopped",
get:function(){return this._stopTime!==p}},{key:"value",get:function(){(0,t.default)((0,r.default)(b.prototype),"value",this)===p&&(this.isStopped||this.stop(),(0,n.default)((0,r.default)(b.prototype),"value",this.stopTime-this.startTime,this,!0));return(0,t.default)((0,r.default)(b.prototype),"value",this)},set:function(a){(0,n.default)((0,r.default)(b.prototype),"value",a,this,!0)}},{key:"startTime",get:function(){return this._startTime}},{key:"stopTime",get:function(){return this._stopTime}},{key:"now",
value:function(){return performance.now()}}]);return b}(b(a(1741)).default);c["default"]=a},2952:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var a;b=a||(a={});b.String="String";b.Counter="Counter";b.Timer="Timer";b.List="List";c["default"]=a},5607:function(b,c,a){b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});Object.defineProperty(c,"Counter",{enumerable:!0,get:function(){return m.default}});Object.defineProperty(c,"HttpRequest",{enumerable:!0,get:function(){return p.default}});
Object.defineProperty(c,"Initialization",{enumerable:!0,get:function(){return l.default}});Object.defineProperty(c,"Object",{enumerable:!0,get:function(){return e.default}});Object.defineProperty(c,"String",{enumerable:!0,get:function(){return h.default}});Object.defineProperty(c,"TimedAttempt",{enumerable:!0,get:function(){return t.default}});Object.defineProperty(c,"Timer",{enumerable:!0,get:function(){return k.default}});Object.defineProperty(c,"TimerStopwatch",{enumerable:!0,get:function(){return n.default}});
var e=b(a(8116)),h=b(a(2545)),m=b(a(199)),k=b(a(1741)),n=b(a(4392)),t=b(a(4053)),l=b(a(21)),p=b(a(6673))},1128:function(b,c){Object.defineProperty(c,"__esModule",{value:!0})},4873:function(b,c,a){function e(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(a);b&&(k=k.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));c.push.apply(c,k)}return c}function h(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:
{};b%2?e(c,!0).forEach(function(b){(0,m.default)(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):e(c).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var m=b(a(8416)),k=b(a(6690)),n=b(a(9728));a=function(){function a(){var b=0<arguments.length&&arguments[0]!==p?arguments[0]:a.REGIONS.NA,c=1<arguments.length?arguments[1]:
p,e=2<arguments.length?arguments[2]:p,n=3<arguments.length&&arguments[3]!==p?arguments[3]:{},h=4<arguments.length?arguments[4]:p;(0,k.default)(this,a);b=a.createSushiUrl(b,c);n=a.createCsmUserContext(b,n);this.ue_csm=this.setupMockCSMObject(n);this.encapsulatedWindow=this.setupMockWindow(this.ue_csm);this.transportationClientCode(this.ue_csm,A);h&&(this.ue_csm.ue._sBcn={isSupported:!0,send:function(a,b){h(a,b);return!0}});this.clientCode(this.ue_csm,this.encapsulatedWindow);this.errorHandler=e}(0,
n.default)(a,null,[{key:"createSushiUrl",value:function(b,c){if(!c)throw Error("Sushi Driver was not provided with a source group.");switch(b){case a.REGIONS.NA:b="unagi-na";break;case a.REGIONS.EU:b="unagi-eu";break;case a.REGIONS.FE:b="unagi-fe";break;case a.REGIONS.CN:b="unagi-cn";break;default:throw Error("Unrecognized region '".concat(b,"' provided to SushiClient."));}return"https://".concat(b,".amazon.com/1/events/").concat(c)}},{key:"createCsmUserContext",value:function(a){return h({hiPriFlushInterval:1E3,
lowPriFlushInterval:1E4,requestId:"1",errorChannel:"jserr",sessionStorageWrapper:p,errorHandlerFunction:console.log,sushiUrl:a},1<arguments.length&&arguments[1]!==p?arguments[1]:{})}},{key:"REGIONS",get:function(){return{NA:"NA",EU:"EU",FE:"FE",CN:"CN"}}}]);(0,n.default)(a,[{key:"event",value:function(a,b,c,k){4<arguments.length&&arguments[4]!==p&&arguments[4]&&console.log("SushiClient wrapper publishing the following:",{data:a,producerId:b,schemaId:c,options:k});return this.ue_csm.ue.event(a,b,c,
k)}},{key:"reset",value:function(){this.ue_csm.ue.event.reset()}},{key:"onSushiFlush",value:function(a){this.ue_csm.ue.onSushiFlush(a)}},{key:"onSushiUnload",value:function(a){this.ue_csm.ue.onSushiUnload(a)}},{key:"setupMockCSMObject",value:function(a){var b=this;return{ue_hpsi:a.hiPriFlushInterval,ue_lpsi:a.lowPriFlushInterval,ue:{ssw:a.sessionStorageWrapper,log:function(a,c){b.errorHandler?b.errorHandler(a):console.log("An error has occurred in SushiClient channel "+c,a)},exec:function(a,b){return a},
event:function(a,b,c){console.warn("SushiClient CSM stub called in unsupported manner: event()")},attach:function(a,b,c){c=c||A;A.EventTarget&&A.EventTarget.prototype&&A.EventTarget.prototype.addEventListener?A.EventTarget.prototype.addEventListener.call(c,a,b,!!A.ue_clf):c.addEventListener?c.addEventListener(a,b,!!A.ue_clf):c.attachEvent&&c.attachEvent("on"+a,b)}},ueLogError:a.errorHandlerFunction,ue_surl:a.sushiUrl,ue_id:a.requestId,ue_err_chan:a.errorChannel}}},{key:"setupMockWindow",value:function(a){return{ue_csm:a,
ueLogError:a.ueLogError,ue:a.ue,setTimeout:function(a,b){return A.setTimeout(a,b)}}}},{key:"clientCode",value:function(a,b){a.ue.exec(function(a,b){function c(){for(var a=0;a<arguments.length;a++){var c=arguments[a];try{if(c.isSupported){var d=ja.buildPayload(L,F);var g=c.send(A,d)}else throw dummyException;return g}catch(Wa){}}u({m:"All supported clients failed",attribution:"CSMSushiClient_TRANSPORTATION_FAIL",f:"sushi-client.js",logLevel:"ERROR"},b.ue_err_chan||"jserr")}function g(){if(F.length){for(var a=
0;a<R.length;a++)R[a]();c(r._sBcn||{},r._ajx||{});F=[];M={};L={};P=V=N=K=0}}function d(){var a=new Date,b=function(a){return 10>a?"0"+a:a};return Date.prototype.toISOString?a.toISOString():a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"}function k(a){try{return JSON.stringify(a)}catch(Ua){}return null}function n(c,n,e,h){var l=!1;h=h||{};S++;
S==m&&u({m:"Max number of Sushi Logs exceeded",f:"sushi-client.js",logLevel:"ERROR",attribution:"CSMSushiClient_MAX_CALLS"},b.ue_err_chan||"jserr");var v;if(v=!(S>=m))(v=c&&-1<c.constructor.toString().indexOf("Object")&&n&&-1<n.constructor.toString().indexOf("String")&&e&&-1<e.constructor.toString().indexOf("String"))||da++;v&&(r.count&&r.count("Event:"+e,1),c.producerId=c.producerId||n,c.schemaId=c.schemaId||e,c.timestamp=d(),n=Date.now?Date.now():+new Date,e=Math.random().toString().substring(2,
12),c.messageId=a.ue_id+"-"+n+"-"+e,h&&!h.ssd&&(c.sessionId=c.sessionId||a.ue_sid,c.requestId=c.requestId||a.ue_id,c.obfuscatedMarketplaceId=c.obfuscatedMarketplaceId||a.ue_mid),(n=k(c))?(n=n.length,(F.length==t||N+n>p)&&g(),N+=n,c={data:ja.compressEvent(c)},F.push(c),(h||{}).n?0===xa?g():P||(P=b.setTimeout(g,xa)):V||(V=b.setTimeout(g,ya)),l=!0):l=!1);!l&&a.ue_int&&console.error("Invalid JS Nexus API call");return l}function e(){if(!za){for(var b=0;b<W.length;b++)W[b]();for(b=0;b<R.length;b++)R[b]();
F.length&&(a.ue_sbuimp&&a.ue&&a.ue.ssw&&(b=k({dct:L,evt:F}),a.ue.ssw("eeldata",b),a.ue.ssw("eelsts","unk")),c(r._sBcn||{}));za=!0}}function h(a){W.push(a)}function l(a){R.push(a)}var m=1E3,t=499,p=524288,w=function(){},r=a.ue||{},u=r.log||w,x=a.uex||w;(a.uet||w)("bb","ue_sushi_v1",{wb:1});var A=a.ue_surl||"https://unagi-na.amazon.com/1/events/com.amazon.csm.nexusclient.gamma",I=["messageId","timestamp"],F=[],M={},L={},N=0,K=0,da=0,S=0,W=[],R=[],za=!1,P,V,xa=void 0===a.ue_hpsi?1E3:a.ue_hpsi,ya=void 0===
a.ue_lpsi?1E4:a.ue_lpsi,ja=function(){function a(a){M[a]="#"+K++;L[M[a]]=a;return M[a]}function b(c){if(!(c instanceof Function)){if(c instanceof Array){for(var d=[],g=c.length,k=0;k<g;k++)d[k]=b(c[k]);return d}if(c instanceof Object){d={};for(g in c)c.hasOwnProperty(g)&&(d[M[g]?M[g]:a(g)]=-1===I.indexOf(g)?b(c[g]):c[g]);return d}return"string"===typeof c&&(c.length>("#"+K).length||"#"===c.charAt(0))?M[c]?M[c]:a(c):c}}return{compressEvent:b,buildPayload:function(){return k({cs:{dct:L},events:F})}}}();
(function(){if(r.event&&r.event.isStub){if(a.ue_sbuimp&&a.ue&&a.ue.ssw){var b=a.ue.ssw("eelsts").val;if(b&&"unk"===b&&(b=a.ue.ssw("eeldata").val)){a:{try{var c=JSON.parse(b);break a}catch(Va){}c=null}c&&c.evt instanceof Array&&c.dct instanceof Object&&(F=c.evt,L=c.dct,F&&L&&(g(),a.ue.ssw("eeldata","{}"),a.ue.ssw("eelsts","scs")))}}r.event.replay(function(a){a[3]=a[3]||{};a[3].n=1;n.apply(this,a)});r.onSushiUnload.replay(function(a){h(a[0])});r.onSushiFlush.replay(function(a){l(a[0])})}})();r.attach("beforeunload",
e);r.attach("pagehide",e);r._cmps=ja;r.event=n;r.event.reset=function(){S=0};r.onSushiUnload=h;r.onSushiFlush=l;try{b.P&&b.P.register&&b.P.register("sushi-client",w)}catch(ia){a.ueLogError(ia,{logLevel:"WARN"})}x("ld","ue_sushi_v1",{wb:1})},"Nxs-JS-Client")(a,b)}},{key:"transportationClientCode",value:function(a,b){a.ue.exec(function(a,b){var c=function(){},g=function(){return{send:function(a,d){if(d&&a){if(b.XDomainRequest){var g=new XDomainRequest;g.onerror=c;g.ontimeout=c;g.onprogress=c;g.onload=
c;g.timeout=0}else if(b.XMLHttpRequest){if(g=new XMLHttpRequest,!("withCredentials"in g))throw"";}else g=void 0;if(!g)throw"";g.open("POST",a,!0);g.setRequestHeader&&g.setRequestHeader("Content-type","text/plain");g.send(d)}},isSupported:!0}}(),d=function(){return{send:function(b,c){if(b&&c)if(navigator.sendBeacon(b,c))a.ue_sbuimp&&a.ue&&a.ue.ssw&&a.ue.ssw("eelsts","scs");else throw"";},isSupported:!!navigator.sendBeacon&&!(b.cordova&&b.cordova.platformId&&"ios"==b.cordova.platformId)}}();a.ue._ajx=
g;a.ue._sBcn=d},"Transportation-clients")(a,b)}}]);return a}();c["default"]=a},9384:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c.GetNativeInfoErrorCode=c.ErrorCode=void 0;c.createErrorResult=function(a,b){return{errorCode:a,errorDetails:{message:b}}};c.createErrorResultForGetNativeInfo=function(a,b){return{errorCode:a,errorDetails:b}};b=function(a){a.UNSUPPORTED_PLATFORM="Unsupported_Platform";a.UNSUPPORTED_MAP_VERSION="Unsupported_MAP_Version";a.INVALID_INPUT="Invalid_Input";
a.TIMEOUT_ERROR="Timeout_Error";a.MALFORMED_RESPONSE="Malformed_Response";return a}({});c.ErrorCode=b;b=function(a){a.INTERNAL_ERROR="Internal_Error";a.UNSUPPORTED_PLATFORM="Unsupported_Platform";a.TIMEOUT_ERROR="Timeout_Error";a.MALFORMED_RESPONSE="Malformed_Response";return a}({});c.GetNativeInfoErrorCode=b},8769:function(b,c){function a(b){"@babel/helpers - typeof";return a="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&
"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},a(b)}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});Object.defineProperty(a,"prototype",{writable:!1});b&&h(a,b)}function h(a,b){h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){a.__proto__=
b;return a};return h(a,b)}function m(b){var c=k();return function(){var d=n(b);if(c){var g=n(this).constructor;d=Reflect.construct(d,arguments,g)}else d=d.apply(this,arguments);if(!d||"object"!==a(d)&&"function"!==typeof d){if(void 0!==d)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=this}return d}}function k(){if("undefined"===typeof Reflect||!Reflect.construct||
Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(v){return!1}}function n(a){n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)};return n(a)}function t(a,b){for(var c=0;c<b.length;c++){var g=b[c];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,x(g.key),g)}}function l(a,b,c){b&&
t(a.prototype,b);c&&t(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function x(b){a:if("object"===a(b)&&null!==b){var c=b[Symbol.toPrimitive];if(c!==p){b=c.call(b,"string");if("object"!==a(b))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}b=String(b)}return"symbol"===a(b)?b:String(b)}function r(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=c.PlatformInfo=
c.MapInfo=c.GetNativeInfoAPIResponse=c.GetNativeInfoAPIErrorResponse=c.AppInfo=void 0;b=l(function g(){r(this,g)});c.GetNativeInfoAPIResponse=b;var w=l(function D(a,b){r(this,D);this.identifier=a;this.version=b});c.AppInfo=w;w=l(function sb(a,b,c,k){r(this,sb);this.name=a;this.version=b;this.manufacturer=c;this.isUserVerifyingPlatformAuthenticatorAvailable=k});c.PlatformInfo=w;w=l(function va(a,b){r(this,va);this.mapVersion=a;this.jsVersion=b});c.MapInfo=w;w=function(a){function b(a,k,n,h){r(this,
b);var e=c.call(this);e._appInfo=a;e._platformInfo=k;e._mapInfo=n;e._jsBridgeVersion=h;return e}e(b,a);var c=m(b);l(b,[{key:"appInfo",get:function(){return this._appInfo},set:function(a){this._appInfo=a}},{key:"platformInfo",get:function(){return this._platformInfo},set:function(a){this._platformInfo=a}},{key:"mapInfo",get:function(){return this._mapInfo},set:function(a){this._mapInfo=a}},{key:"jsBridgeVersion",get:function(){return this._jsBridgeVersion},set:function(a){this._jsBridgeVersion=a}}]);
return b}(b);c["default"]=w;b=function(a){function b(a){r(this,b);var k=c.call(this);k._error=a;return k}e(b,a);var c=m(b);l(b,[{key:"error",get:function(){return this._error},set:function(a){this._error=a}}]);return b}(b);c.GetNativeInfoAPIErrorResponse=b},3931:function(b,c,a){function e(a){if("function"!==typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(e=function(a){return a?c:b})(a)}function h(a){return a&&a.__esModule?a:{"default":a}}function m(a){"@babel/helpers - typeof";return m=
"function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},m(a)}function k(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,t(d.key),d)}}function n(a,b,c){b&&k(a.prototype,b);c&&k(a,c);Object.defineProperty(a,
"prototype",{writable:!1});return a}function t(a){a:if("object"===m(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==p){a=b.call(a,"string");if("object"!==m(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===m(a)?a:String(a)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var l=a(5645),x=a(9384),r=h(a(1029)),w=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!==m(a)&&"function"!==typeof a)return{"default":a};
if((b=e(b))&&b.has(a))return b.get(a);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor,g;for(g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var k=d?Object.getOwnPropertyDescriptor(a,g):null;k&&(k.get||k.set)?Object.defineProperty(c,g,k):c[g]=a[g]}c["default"]=a;b&&b.set(a,c);return c}(a(8769)),v=h(a(7221)),g=h(a(9933)),d=a(1071),y=h(a(4145));b=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}n(a,[{key:"apiCall",
value:function(a){var b=this;console.log("Calling ".concat(a.namespace,".").concat(a.method));return new Promise(function(c,d){y["default"].getInstance().nativeCall(a,function(d){b.isSuccessResult(d)?(d=new g["default"](a.namespace,a.method,d,p),c(d)):(d=new g["default"](a.namespace,a.method,p,d),c(d))})})}},{key:"getMinVersionForFeature",value:function(a,b){if(a in d.minVersionConfig.features){var c=d.minVersionConfig.features[a].versions;if(b in c)return c=c[b],new r["default"](a,b,c.minMAPAndroidJSBridgeVersion,
c.minMAPiOSJSBridgeVersion)}return null}},{key:"getNativeInfo",value:function(){var a=this,b=new v["default"](l.COMMON_NAMESPACE,"getNativeInfo",{timeout:l.TIMEOUT_LOCAL_IN_MILLISECONDS});return new Promise(function(c,d){a.apiCall(b).then(function(b){b&&(b.error?(b=new w.GetNativeInfoAPIErrorResponse(a.mapNativeError(b.error)),d(b)):b.apiResult&&(b=b.apiResult,b=new w["default"](b.appInfo,b.platformInfo,b.mapInfo,b.jsBridgeVersion),c(b)))})["catch"](function(a){a=new w.GetNativeInfoAPIErrorResponse((0,
x.createErrorResultForGetNativeInfo)(x.GetNativeInfoErrorCode.INTERNAL_ERROR,{message:"apiCall Error"}));d(a)})})}},{key:"mapNativeError",value:function(a){switch(a.errorCode){case x.ErrorCode.UNSUPPORTED_PLATFORM:return(0,x.createErrorResultForGetNativeInfo)(x.GetNativeInfoErrorCode.UNSUPPORTED_PLATFORM,a.errorDetails);case x.ErrorCode.TIMEOUT_ERROR:return(0,x.createErrorResultForGetNativeInfo)(x.GetNativeInfoErrorCode.TIMEOUT_ERROR,a.errorDetails);case x.ErrorCode.MALFORMED_RESPONSE:return(0,x.createErrorResultForGetNativeInfo)(x.GetNativeInfoErrorCode.MALFORMED_RESPONSE,
a.errorDetails);default:return(0,x.createErrorResultForGetNativeInfo)(x.GetNativeInfoErrorCode.INTERNAL_ERROR,a.errorDetails)}}},{key:"isSuccessResult",value:function(a){return"errorCode"in a&&"errorDetails"in a?!1:!0}}],[{key:"getInstance",value:function(){a.instance||(a.instance=new a);return a.instance}}]);return a}();c["default"]=b},1029:function(b,c){function a(b){"@babel/helpers - typeof";return a="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?
"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},a(b)}function e(a,b){for(var c=0;c<b.length;c++){var k=b[c];k.enumerable=k.enumerable||!1;k.configurable=!0;"value"in k&&(k.writable=!0);Object.defineProperty(a,m(k.key),k)}}function h(a,b,c){b&&e(a.prototype,b);c&&e(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function m(b){a:if("object"===a(b)&&null!==b){var c=b[Symbol.toPrimitive];
if(c!==p){b=c.call(b,"string");if("object"!==a(b))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}b=String(b)}return"symbol"===a(b)?b:String(b)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=c.Feature=void 0;b=function(a){a.PASSKEY="passkey";return a}({});c.Feature=b;b=function(){function a(b,c,k,e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._feature=b;this._featureVersion=c;this._minMAPAndroidJsBridgeVersion=k;
this._minMAPiOSJsBridgeVersion=e}h(a,[{key:"minMAPAndroidJsBridgeVersion",get:function(){return this._minMAPAndroidJsBridgeVersion}},{key:"minMAPiOSJsBridgeVersion",get:function(){return this._minMAPiOSJsBridgeVersion}},{key:"featureVersion",get:function(){return this._featureVersion}},{key:"feature",get:function(){return this._feature}}]);return a}();c["default"]=b},7221:function(b,c){function a(b){"@babel/helpers - typeof";return a="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===
typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},a(b)}function e(a,b){for(var c=0;c<b.length;c++){var k=b[c];k.enumerable=k.enumerable||!1;k.configurable=!0;"value"in k&&(k.writable=!0);Object.defineProperty(a,m(k.key),k)}}function h(a,b,c){b&&e(a.prototype,b);c&&e(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function m(b){a:if("object"===a(b)&&null!==b){var c=
b[Symbol.toPrimitive];if(c!==p){b=c.call(b,"string");if("object"!==a(b))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}b=String(b)}return"symbol"===a(b)?b:String(b)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;b=function(){function a(b,c,e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._namespace=b;this._method=c;this._paramObject=e}h(a,[{key:"namespace",get:function(){return this._namespace},set:function(a){this._namespace=
a}},{key:"method",get:function(){return this._method},set:function(a){this._method=a}},{key:"paramObject",get:function(){return this._paramObject},set:function(a){this._paramObject=a}}]);return a}();c["default"]=b},9933:function(b,c){function a(b){"@babel/helpers - typeof";return a="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":
"undefined"===typeof a?"undefined":u(a)},a(b)}function e(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,m(e.key),e)}}function h(a,b,c){b&&e(a.prototype,b);c&&e(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function m(b){a:if("object"===a(b)&&null!==b){var c=b[Symbol.toPrimitive];if(c!==p){b=c.call(b,"string");if("object"!==a(b))break a;throw new TypeError("@@toPrimitive must return a primitive value.");
}b=String(b)}return"symbol"===a(b)?b:String(b)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;b=function(){function a(b,c,e,h){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._namespaceCalled=b;this._methodCalled=c;this._apiResult=e;this._error=h}h(a,[{key:"namespaceCalled",get:function(){return this._namespaceCalled},set:function(a){this._namespaceCalled=a}},{key:"methodCalled",get:function(){return this._methodCalled},set:function(a){this._methodCalled=
a}},{key:"apiResult",get:function(){return this._apiResult},set:function(a){this._apiResult=a}},{key:"error",get:function(){return this._error},set:function(a){this._error=a}}]);return a}();c["default"]=b},1071:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c.minVersionConfig=void 0;c.minVersionConfig={features:{passkey:{versions:{1:{minMAPAndroidJSBridgeVersion:1,minMAPiOSJSBridgeVersion:1}}}}}},5177:function(b,c,a){function e(a){"@babel/helpers - typeof";return e="function"==typeof Symbol&&
"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},e(a)}function h(a){return a&&a.__esModule?a:{"default":a}}function m(a){if("function"!==typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(m=function(a){return a?c:b})(a)}function k(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!==e(a)&&"function"!==
typeof a)return{"default":a};if((b=m(b))&&b.has(a))return b.get(a);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor,g;for(g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=d?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(c,g,h):c[g]=a[g]}c["default"]=a;b&&b.set(a,c);return c}Object.defineProperty(c,"__esModule",{value:!0});Object.defineProperty(c,"APIParamObject",{enumerable:!0,get:function(){return p.APIParamObject}});Object.defineProperty(c,
"APIResult",{enumerable:!0,get:function(){return r.APIResult}});Object.defineProperty(c,"Base64UrlEncodingHelper",{enumerable:!0,get:function(){return w["default"]}});Object.defineProperty(c,"ErrorCode",{enumerable:!0,get:function(){return n.ErrorCode}});Object.defineProperty(c,"ErrorResult",{enumerable:!0,get:function(){return n.ErrorResult}});Object.defineProperty(c,"Feature",{enumerable:!0,get:function(){return t.Feature}});Object.defineProperty(c,"FeatureMinVersion",{enumerable:!0,get:function(){return t["default"]}});
Object.defineProperty(c,"GetNativeInfoAPIErrorResponse",{enumerable:!0,get:function(){return l.GetNativeInfoAPIErrorResponse}});Object.defineProperty(c,"GetNativeInfoAPIResponse",{enumerable:!0,get:function(){return l.GetNativeInfoAPIResponse}});Object.defineProperty(c,"GetNativeInfoAPISuccessResponse",{enumerable:!0,get:function(){return l["default"]}});Object.defineProperty(c,"GetNativeInfoErrorCode",{enumerable:!0,get:function(){return n.GetNativeInfoErrorCode}});Object.defineProperty(c,"MAPNativeJSInterface",
{enumerable:!0,get:function(){return v["default"]}});Object.defineProperty(c,"MOBINamespace",{enumerable:!0,get:function(){return p.MOBINamespace}});Object.defineProperty(c,"NativeJsInterfaceAPIRequest",{enumerable:!0,get:function(){return p["default"]}});Object.defineProperty(c,"NativeJsInterfaceAPIResponse",{enumerable:!0,get:function(){return r["default"]}});var n=a(9384),t=k(a(1029)),l=k(a(8769)),p=k(a(7221)),r=k(a(9933)),w=h(a(4196)),v=h(a(3931))},7525:function(b,c,a){function e(a){"@babel/helpers - typeof";
return e="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},e(a)}function h(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,k(d.key),d)}}function m(a,b,c){b&&h(a.prototype,b);c&&h(a,c);Object.defineProperty(a,
"prototype",{writable:!1});return a}function k(a){a:if("object"===e(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==p){a=b.call(a,"string");if("object"!==e(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===e(a)?a:String(a)}function n(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});
Object.defineProperty(a,"prototype",{writable:!1});b&&t(a,b)}function t(a,b){t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){a.__proto__=b;return a};return t(a,b)}function l(a){var b=x();return function(){var c=r(a);if(b){var d=r(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,arguments);if(!c||"object"!==e(c)&&"function"!==typeof c){if(void 0!==c)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
c=this}return c}}function x(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(w){return!1}}function r(a){r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)};return r(a)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;b=function(a){function b(){if(!(this instanceof
b))throw new TypeError("Cannot call a class as a function");return c.apply(this,arguments)}n(b,a);var c=l(b);m(b,[{key:"isAPIAvailable",value:function(a){var b=A[a.namespace];return"undefined"!==typeof b&&"function"===typeof b[a.method]?!0:!1}},{key:"apiCall",value:function(a){A&&A[a.namespace]&&A[a.namespace][a.method]&&"function"===typeof A[a.namespace][a.method]&&(console.log("Calling native bridge API on android: ".concat(JSON.stringify(a.paramObject))),A[a.namespace][a.method](this.encodeObject(a.paramObject)))}}]);
return b}(function(a){return a&&a.__esModule?a:{"default":a}}(a(4072))["default"]);c["default"]=b},7802:function(b,c,a){function e(a){"@babel/helpers - typeof";return e="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},e(a)}function h(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=
e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,k(e.key),e)}}function m(a,b,c){b&&h(a.prototype,b);c&&h(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function k(a){a:if("object"===e(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==p){a=b.call(a,"string");if("object"!==e(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===e(a)?a:String(a)}function n(a,b){if("function"!==typeof b&&null!==
b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});Object.defineProperty(a,"prototype",{writable:!1});b&&t(a,b)}function t(a,b){t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){a.__proto__=b;return a};return t(a,b)}function l(a){var b=x();return function(){var c=r(a);if(b){var h=r(this).constructor;c=Reflect.construct(c,arguments,h)}else c=c.apply(this,arguments);
if(!c||"object"!==e(c)&&"function"!==typeof c){if(void 0!==c)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=this}return c}}function x(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(v){return!1}}
function r(a){r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)};return r(a)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var w=a(9384);b=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");return c.apply(this,arguments)}n(b,a);var c=l(b);m(b,[{key:"isAPIAvailable",value:function(a){return!0}},{key:"apiCall",value:function(a){console.log("".concat(a.namespace,".").concat(a.method,
" on unsupported version or platform. return error message."));A.mapJSCallbackV2(this.encodeObject(a.paramObject),this.encodeObject((0,w.createErrorResult)(w.ErrorCode.UNSUPPORTED_PLATFORM,"Unsupported platform, probably not running in app WebView.")))}}]);return b}(function(a){return a&&a.__esModule?a:{"default":a}}(a(4072))["default"]);c["default"]=b},8392:function(b,c,a){function e(a){"@babel/helpers - typeof";return e="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===
typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},e(a)}function h(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));c.push.apply(c,d)}return c}function m(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?h(Object(c),
!0).forEach(function(b){v(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):h(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function k(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,g(d.key),d)}}function n(a,b,c){b&&k(a.prototype,b);c&&k(a,c);Object.defineProperty(a,"prototype",{writable:!1});
return a}function t(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});Object.defineProperty(a,"prototype",{writable:!1});b&&l(a,b)}function l(a,b){l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){a.__proto__=b;return a};return l(a,b)}function x(a){var b=r();return function(){var c=w(a);if(b){var d=w(this).constructor;c=Reflect.construct(c,
arguments,d)}else c=c.apply(this,arguments);if(!c||"object"!==e(c)&&"function"!==typeof c){if(void 0!==c)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=this}return c}}function r(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,
[],function(){})),!0}catch(d){return!1}}function w(a){w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)};return w(a)}function v(a,b,c){b=g(b);b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function g(a){a:if("object"===e(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==p){a=b.call(a,"string");if("object"!==e(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");
}a=String(a)}return"symbol"===e(a)?a:String(a)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;b=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");return c.apply(this,arguments)}t(b,a);var c=x(b);n(b,[{key:"isAPIAvailable",value:function(a){var c=A[b.WEBKIT_KEY];return c&&(c=c[b.MESSAGE_HANDLERS_KEY])&&c[a.namespace]?!0:!1}},{key:"apiCall",value:function(a){console.log("Try calling iOS native bridge method. ".concat(a.namespace,
".").concat(a.method));A.webkit.messageHandlers[a.namespace].postMessage(this.encodeObject(m(m({},a.paramObject),{},{apiName:a.method})))}}]);return b}(function(a){return a&&a.__esModule?a:{"default":a}}(a(4072))["default"]);c["default"]=b;v(b,"WEBKIT_KEY","webkit");v(b,"MESSAGE_HANDLERS_KEY","messageHandlers")},4072:function(b,c,a){function e(a){"@babel/helpers - typeof";return e="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&
"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},e(a)}function h(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,k(e.key),e)}}function m(a,b,c){b&&h(a.prototype,b);c&&h(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function k(a){a:if("object"===e(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==p){a=b.call(a,"string");
if("object"!==e(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===e(a)?a:String(a)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var n=function(a){return a&&a.__esModule?a:{"default":a}}(a(4196));b=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}m(a,[{key:"encodeObject",value:function(a){return n["default"].base64URLencode(JSON.stringify(a,function(a,b){return b instanceof
ArrayBuffer?n["default"].bufferToBase64UrlString(b):b}))}}]);return a}();c["default"]=b},4145:function(b,c,a){function e(a){return a&&a.__esModule?a:{"default":a}}function h(a){"@babel/helpers - typeof";return h="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},h(a)}function m(a,b){var c="undefined"!==
typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!c){if(Array.isArray(a)||(c=k(a))||b&&a&&"number"===typeof a.length){c&&(a=c);var d=0;b=function(){};return{s:b,n:function(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}},e:function(a){throw a;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var e=!0,h=!1,g;return{s:function(){c=c.call(a)},n:function(){var a=c.next();e=a.done;
return a},e:function(a){h=!0;g=a},f:function(){try{if(!e&&null!=c["return"])c["return"]()}finally{if(h)throw g;}}}}function k(a,b){if(a){if("string"===typeof a)return n(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);"Object"===c&&a.constructor&&(c=a.constructor.name);if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return n(a,b)}}function n(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}
function t(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,r(d.key),d)}}function l(a,b,c){b&&t(a.prototype,b);c&&t(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function x(a,b,c){b=r(b);b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function r(a){a:if("object"===h(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==p){a=b.call(a,"string");
if("object"!==h(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===h(a)?a:String(a)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var w=a(9384),v=e(a(7221)),g=e(a(4196)),d=a(5063),y=e(a(7525)),D=e(a(7802)),C=e(a(8392));b=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");x(this,"metricPublisherMap",new Map);x(this,"callbackMap",new Map);x(this,"apiNameMap",new Map);
x(this,"callCounter",0);this.nativeCallerList=[];this.prepareIframePreventionToken();this.prepareCommonCallbackForNativeBridge()}l(a,[{key:"registerNativeCaller",value:function(a){this.nativeCallerList.push(a)}},{key:"nativeCall",value:function(a,b){this.prepareMetrics(a.method);this.storeAPICallState(a,b);this.findCorrectNativeCaller(a).apiCall(a)}},{key:"findCorrectNativeCaller",value:function(a){var b=m(this.nativeCallerList),c;try{for(b.s();!(c=b.n()).done;){var d=c.value;if(d.isAPIAvailable(a))return console.log("Found one native bridge that can handle the request. Caller class is:"+
d.constructor.name),d}}catch(fa){b.e(fa)}finally{b.f()}return new D["default"]}},{key:"storeAPICallState",value:function(a,b){var c=this,d=Date.now();a.paramObject.invocationTime=d;a.paramObject.callbackFunctionNameKey="mapJSCallbackV2";a.paramObject.callingId=a.method+d+this.callCounter;this.callCounter+=1;this.callbackMap.set(a.paramObject.callingId,b);this.apiNameMap.set(a.paramObject.callingId,a.method);0<a.paramObject.timeout&&(a.paramObject.timerId=setTimeout(function(){b((0,w.createErrorResult)(w.ErrorCode.TIMEOUT_ERROR,
"Native bridge call timeout."));var d=c.metricPublisherMap.get(a.method);null===d||void 0===d?void 0:d.publishCounter("Timeout",1)},a.paramObject.timeout))}},{key:"prepareCommonCallbackForNativeBridge",value:function(){var a=this;console.log("Setting up common generic callback");A.mapJSCallbackV2=function(b,c){b=JSON.parse(g["default"].base64URLdecode(b));var d=b.callingId,e=b.timerId;if("function"===typeof a.callbackMap.get(d)){var h=a.callbackMap.get(d);a.callbackMap["delete"](d);"number"===typeof e&&
(console.log("Timer id is valid, clear the timeout"),A.clearTimeout(e));e=Date.now()-b.invocationTime;d=a.apiNameMap.get(d);if("undefined"!==typeof d&&(d=a.metricPublisherMap.get(d),null===d||void 0===d?void 0:d.publishTimer("Time",e),"undefined"!==typeof h))if(a.shouldThrowTimeoutError(b,e))null===d||void 0===d?void 0:d.publishCounter("Error",1),h((0,w.createErrorResult)(w.ErrorCode.TIMEOUT_ERROR,"Overall elapsed time is longer than timeout."));else try{var k=g["default"].base64URLdecode(c),m=JSON.parse(k);
console.log("Loading callback with result");"undefined"!==typeof m.errorCode?null===d||void 0===d?void 0:d.publishCounter("Success",1):null===d||void 0===d?void 0:d.publishCounter("Error",1);h(m)}catch(Da){null===d||void 0===d?void 0:d.publishCounter("Error",1),h((0,w.createErrorResult)(w.ErrorCode.MALFORMED_RESPONSE,"Native returning non json formated result."))}}}}},{key:"prepareIframePreventionToken",value:function(){var a=this;A.injectTokenCallbackV2=function(b,c){b=JSON.parse(g["default"].base64URLdecode(b));
var d=JSON.parse(g["default"].base64URLdecode(c));c=document.getElementById(d.callingId);if(null!==c){var e,h=d.originalNamespace;d=d.originalFunction;b.token=c.innerText;b=new v["default"](h,d,b);a.findCorrectNativeCaller(b).apiCall(b);null===(e=c.parentNode)||void 0===e?void 0:e.removeChild(c)}}}},{key:"shouldThrowTimeoutError",value:function(a,b){return"undefined"!==typeof a.timeout&&b>=a.timeout}},{key:"prepareMetrics",value:function(a){"undefined"===typeof this.metricPublisherMap.get(a)&&this.metricPublisherMap.set(a,
(0,d.getMetricsPublisher)(a));a=this.metricPublisherMap.get(a);null===a||void 0===a?void 0:a.publishCounter("Counter",1)}}],[{key:"getInstance",value:function(){a.instance||(a.instance=new a,a.instance.registerNativeCaller(new y["default"]),a.instance.registerNativeCaller(new C["default"]));return a.instance}}]);return a}();c["default"]=b},4196:function(b,c){function a(b){"@babel/helpers - typeof";return a="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?
"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},a(b)}function e(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,m(e.key),e)}}function h(a,b,c){b&&e(a.prototype,b);c&&e(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function m(b){a:if("object"===a(b)&&null!==b){var c=b[Symbol.toPrimitive];
if(c!==p){b=c.call(b,"string");if("object"!==a(b))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}b=String(b)}return"symbol"===a(b)?b:String(b)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;b=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}h(a,null,[{key:"base64URLencode",value:function(a){return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}},{key:"base64URLdecode",value:function(a){a=
a.replace(/-/g,"+").replace(/_/g,"/");return atob(a)}},{key:"bufferToBase64UrlString",value:function(a){return A.btoa((new Uint8Array(a)).reduce(function(a,b){return a+String.fromCharCode(b)},"")).replace(/\+/g,"-").replace(/\//g,"_").replace(/=*$/,"")}}]);return a}();c["default"]=b},5645:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c.TIMEOUT_NETWORK_IN_MILLISECONDS=c.TIMEOUT_LOCAL_IN_MILLISECONDS=c.COMMON_NAMESPACE=void 0;c.COMMON_NAMESPACE="IDENTITY_MOBILE";c.TIMEOUT_LOCAL_IN_MILLISECONDS=
5E3;c.TIMEOUT_NETWORK_IN_MILLISECONDS=1E4},5063:function(b,c,a){Object.defineProperty(c,"__esModule",{value:!0});c.getMetricsPublisher=function(a){var b="unknown";"undefined"!==typeof A.location&&(b=(0,e.getSanitizedClientNameByPath)());b="IdentityService.".concat(b);return new e.IdentityKatalMetricsPublisher(b,"MAPNativeJSInterface",a)};var e=a(6957)},6445:function(b,c,a){a.r(c);a.d(c,{compare:function(){return p},compareVersions:function(){return n},satisfies:function(){return r},validate:function(){return w},
validateStrict:function(){return v}});var e=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,h=function(a){if("string"!==typeof a)throw new TypeError("Invalid argument expected string");var b=a.match(e);if(!b)throw Error("Invalid argument not valid semver ('"+a+"' received)");b.shift();return b},m=function(a){var b=parseInt(a,10);return isNaN(b)?a:b},k=function(a,b){for(var c=0;c<Math.max(a.length,b.length);c++){var d=
a[c]||"0";var e=b[c]||"0";"*"===d||"x"===d||"X"===d||"*"===e||"x"===e||"X"===e?e=0:(d=m(d),e=m(e),e=("undefined"===typeof d?"undefined":u(d))!==("undefined"===typeof e?"undefined":u(e))?[String(d),String(e)]:[d,e],d=I(e,2),e=d[0],d=d[1],e=e>d?1:e<d?-1:0);if(0!==e)return e}return 0},n=function(a,b){a=h(a);var c=h(b);b=a.pop();var d=c.pop();a=k(a,c);return 0!==a?a:b&&d?k(b.split("."),d.split(".")):b||d?b?-1:1:0},p=function(a,b,c){if("string"!==typeof c)throw new TypeError("Invalid operator type, expected string but got "+
("undefined"===typeof c?"undefined":u(c)));if(-1===x.indexOf(c))throw Error("Invalid operator, expected one of "+x.join("|"));a=n(a,b);return l[c].includes(a)},l={"\x3e":[1],"\x3e\x3d":[0,1],"\x3d":[0],"\x3c\x3d":[-1,0],"\x3c":[-1],"!\x3d":[-1,1]},x=Object.keys(l),r=function D(a,b){b=b.replace(/([><=]+)\s+/g,"$1");if(b.includes("||"))return b.split("||").some(function(b){return D(a,b)});if(b.includes(" - ")){var c=b.split(" - ",2);c=I(c,2);return D(a,"\x3e\x3d"+c[0]+" \x3c\x3d"+c[1])}if(b.includes(" "))return b.trim().replace(/\s{2,}/g,
" ").split(" ").every(function(b){return D(a,b)});c=(c=b.match(/^([<>=~^]+)/))?c[1]:"\x3d";if("^"!==c&&"~"!==c)return p(a,b,c);var d=h(a);d=I(d,5);var e=d[0],m=d[1],n=d[2];d=d[4];b=h(b);var l=I(b,5),t=l[1],r=l[2];b=l[4];e=[e,m,n];m=[l[0],null!==t&&void 0!==t?t:"x",null!==r&&void 0!==r?r:"x"];if(b&&(!d||0!==k(e,m)||-1===k(d.split("."),b.split("."))))return!1;d=m.findIndex(function(a){return"0"!==a})+1;c="~"===c?2:1<d?d:1;return 0!==k(e.slice(0,c),m.slice(0,c))||-1===k(e.slice(c),m.slice(c))?!1:!0},
w=function(a){return"string"===typeof a&&/^[v\d]/.test(a)&&e.test(a)},v=function(a){return"string"===typeof a&&/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/.test(a)}},6490:function(b){b.exports=["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(;\\s+wv|Version/\\d.\\d\\s+Chrome/\\d+(\\.0){3})","Linux; U; Android"]},942:function(b,c,a){c=a(6490);var e=new RegExp("("+
c.join("|")+")","ig");b.exports=function(a){return!!a.match(e)}},5877:function(b,c,a){c=a(3570);a=a(1171);a.v1=c;a.v4=a;b.exports=a},5327:function(b){for(var c=[],a=0;256>a;++a)c[a]=(a+256).toString(16).substr(1);b.exports=function(a,b){b=b||0;return[c[a[b++]],c[a[b++]],c[a[b++]],c[a[b++]],"-",c[a[b++]],c[a[b++]],"-",c[a[b++]],c[a[b++]],"-",c[a[b++]],c[a[b++]],"-",c[a[b++]],c[a[b++]],c[a[b++]],c[a[b++]],c[a[b++]],c[a[b++]]].join("")}},5217:function(b){var c="undefined"!=typeof crypto&&crypto.getRandomValues&&
crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof A.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(c){var a=new Uint8Array(16);b.exports=function(){c(a);return a}}else{var e=Array(16);b.exports=function(){for(var a=0,b;16>a;a++)0===(a&3)&&(b=4294967296*Math.random()),e[a]=b>>>((a&3)<<3)&255;return e}}},3570:function(b,c,a){var e=a(5217),h=a(5327),m,k,n=0,t=0;b.exports=function(a,b,c){c=b&&c||0;var l=b||[];a=a||{};var r=a.node||m,g=a.clockseq!==
p?a.clockseq:k;if(null==r||null==g){var d=e();null==r&&(r=m=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]);null==g&&(g=k=(d[6]<<8|d[7])&16383)}d=a.msecs!==p?a.msecs:(new Date).getTime();var u=a.nsecs!==p?a.nsecs:t+1,x=d-n+(u-t)/1E4;0>x&&a.clockseq===p&&(g=g+1&16383);(0>x||d>n)&&a.nsecs===p&&(u=0);if(1E4<=u)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");n=d;t=u;k=g;d+=122192928E5;a=(1E4*(d&268435455)+u)%4294967296;l[c++]=a>>>24&255;l[c++]=a>>>16&255;l[c++]=a>>>8&255;l[c++]=a&255;a=d/4294967296*
1E4&268435455;l[c++]=a>>>8&255;l[c++]=a&255;l[c++]=a>>>24&15|16;l[c++]=a>>>16&255;l[c++]=g>>>8|128;l[c++]=g&255;for(g=0;6>g;++g)l[c+g]=r[g];return b?b:h(l)}},1171:function(b,c,a){var e=a(5217),h=a(5327);b.exports=function(a,b,c){c=b&&c||0;"string"==typeof a&&(b="binary"===a?Array(16):null,a=null);a=a||{};a=a.random||(a.rng||e)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(b)for(var k=0;16>k;++k)b[c+k]=a[k];return b||h(a)}},6470:function(){},3897:function(b){b.exports=function(b,a){if(null==a||a>b.length)a=
b.length;for(var c=0,h=Array(a);c<a;c++)h[c]=b[c];return h};b.exports.__esModule=!0;b.exports["default"]=b.exports},3405:function(b,c,a){var e=a(3897);b.exports=function(a){if(Array.isArray(a))return e(a)};b.exports.__esModule=!0;b.exports["default"]=b.exports},6115:function(b){b.exports=function(b){if(void 0===b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b};b.exports.__esModule=!0;b.exports["default"]=b.exports},6690:function(b){b.exports=function(b,
a){if(!(b instanceof a))throw new TypeError("Cannot call a class as a function");};b.exports.__esModule=!0;b.exports["default"]=b.exports},9728:function(b,c,a){function e(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,h(e.key),e)}}var h=a(4062);b.exports=function(a,b,c){b&&e(a.prototype,b);c&&e(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a};b.exports.__esModule=!0;b.exports["default"]=
b.exports},8416:function(b,c,a){var e=a(4062);b.exports=function(a,b,c){b=e(b);b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a};b.exports.__esModule=!0;b.exports["default"]=b.exports},1588:function(b,c,a){function e(){"undefined"!==typeof Reflect&&Reflect.get?(b.exports=e=Reflect.get.bind(),b.exports.__esModule=!0):(b.exports=e=function(a,b,c){var e=h(a,b);if(e)return e=Object.getOwnPropertyDescriptor(e,b),e.get?e.get.call(3>arguments.length?a:
c):e.value},b.exports.__esModule=!0);b.exports["default"]=b.exports;return e.apply(this,arguments)}var h=a(1753);b.exports=e;b.exports.__esModule=!0;b.exports["default"]=b.exports},3808:function(b){function c(a){b.exports=c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)};b.exports.__esModule=!0;b.exports["default"]=b.exports;return c(a)}b.exports=c;b.exports.__esModule=!0;b.exports["default"]=b.exports},1655:function(b,c,a){var e=a(6015);
b.exports=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});Object.defineProperty(a,"prototype",{writable:!1});b&&e(a,b)};b.exports.__esModule=!0;b.exports["default"]=b.exports},4836:function(b){b.exports=function(b){return b&&b.__esModule?b:{"default":b}};b.exports.__esModule=!0;b.exports["default"]=b.exports},9498:function(b){b.exports=
function(b){if("undefined"!==typeof Symbol&&null!=b[Symbol.iterator]||null!=b["@@iterator"])return Array.from(b)};b.exports.__esModule=!0;b.exports["default"]=b.exports},2281:function(b){b.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");};b.exports.__esModule=!0;b.exports["default"]=b.exports},4993:function(b,c,a){var e=a(8698)["default"],h=a(6115);b.exports=function(a,b){if(b&&
("object"===e(b)||"function"===typeof b))return b;if(void 0!==b)throw new TypeError("Derived constructors may only return object or undefined");return h(a)};b.exports.__esModule=!0;b.exports["default"]=b.exports},3788:function(b,c,a){function e(a,b,c,l){e="undefined"!==typeof Reflect&&Reflect.set?Reflect.set:function(a,b,c,e){if(a=h(a,b)){a=Object.getOwnPropertyDescriptor(a,b);if(a.set)return a.set.call(e,c),!0;if(!a.writable)return!1}if(a=Object.getOwnPropertyDescriptor(e,b)){if(!a.writable)return!1;
a.value=c;Object.defineProperty(e,b,a)}else m(e,b,c);return!0};return e(a,b,c,l)}var h=a(1753),m=a(8416);b.exports=function(a,b,c,h,m){if(!e(a,b,c,h||a)&&m)throw new TypeError("failed to set property");return c};b.exports.__esModule=!0;b.exports["default"]=b.exports},6015:function(b){function c(a,e){b.exports=c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){a.__proto__=b;return a};b.exports.__esModule=!0;b.exports["default"]=b.exports;return c(a,e)}b.exports=c;b.exports.__esModule=
!0;b.exports["default"]=b.exports},1753:function(b,c,a){var e=a(3808);b.exports=function(a,b){for(;!Object.prototype.hasOwnProperty.call(a,b)&&(a=e(a),null!==a););return a};b.exports.__esModule=!0;b.exports["default"]=b.exports},861:function(b,c,a){var e=a(3405),h=a(9498),m=a(6116),k=a(2281);b.exports=function(a){return e(a)||h(a)||m(a)||k()};b.exports.__esModule=!0;b.exports["default"]=b.exports},5036:function(b,c,a){var e=a(8698)["default"];b.exports=function(a,b){if("object"!==e(a)||null===a)return a;
var c=a[Symbol.toPrimitive];if(c!==p){a=c.call(a,b||"default");if("object"!==e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===b?String:Number)(a)};b.exports.__esModule=!0;b.exports["default"]=b.exports},4062:function(b,c,a){var e=a(8698)["default"],h=a(5036);b.exports=function(a){a=h(a,"string");return"symbol"===e(a)?a:String(a)};b.exports.__esModule=!0;b.exports["default"]=b.exports},8698:function(b){function c(a){"@babel/helpers - typeof";return b.exports=
c="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},b.exports.__esModule=!0,b.exports["default"]=b.exports,c(a)}b.exports=c;b.exports.__esModule=!0;b.exports["default"]=b.exports},6116:function(b,c,a){var e=a(3897);b.exports=function(a,b){if(a){if("string"===typeof a)return e(a,b);var c=Object.prototype.toString.call(a).slice(8,
-1);"Object"===c&&a.constructor&&(c=a.constructor.name);if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return e(a,b)}};b.exports.__esModule=!0;b.exports["default"]=b.exports}},ca={};(function(){F.d=function(b,c){for(var a in c)F.o(c,a)&&!F.o(b,a)&&Object.defineProperty(b,a,{enumerable:!0,get:c[a]})}})();(function(){F.o=function(b,c){return Object.prototype.hasOwnProperty.call(b,c)}})();(function(){F.r=function(b){"undefined"!==typeof Symbol&&
Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})}})();var da={};(function(){function b(a){"@babel/helpers - typeof";return b="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},b(a)}function c(b,c){if("function"!==
typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,writable:!0,configurable:!0}});Object.defineProperty(b,"prototype",{writable:!1});c&&a(b,c)}function a(b,c){a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){a.__proto__=b;return a};return a(b,c)}function e(a){var c=h();return function(){var f=m(a);if(c){var q=m(this).constructor;f=Reflect.construct(f,arguments,q)}else f=f.apply(this,
arguments);if(!f||"object"!==b(f)&&"function"!==typeof f){if(void 0!==f)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=this}return f}}function h(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(f){return!1}}
function m(a){m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)};return m(a)}function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function n(a,b){for(var c=0;c<b.length;c++){var f=b[c];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,l(f.key),f)}}function t(a,b,c){b&&n(a.prototype,b);c&&n(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}
function l(a){a:if("object"===b(a)&&null!==a){var c=a[Symbol.toPrimitive];if(c!==p){a=c.call(a,"string");if("object"!==b(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===b(a)?a:String(a)}function x(a){return a.filter(function(b,c){return a.indexOf(b)===c})}function r(a){"@babel/helpers - typeof";return r="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&
"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},r(a)}function w(a,b){for(var c=0;c<b.length;c++){var f=b[c];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,g(f.key),f)}}function v(a,b,c){b&&w(a.prototype,b);c&&w(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function g(a){a:if("object"===r(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==p){a=b.call(a,"string");
if("object"!==r(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===r(a)?a:String(a)}function d(a){"@babel/helpers - typeof";return d="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},d(a)}function y(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var f=
Object.getOwnPropertySymbols(a);b&&(f=f.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));c.push.apply(c,f)}return c}function D(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?y(Object(c),!0).forEach(function(b){var f=c[b];a:if("object"===d(b)&&null!==b){var q=b[Symbol.toPrimitive];if(q!==p){b=q.call(b,"string");if("object"!==d(b))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}b=String(b)}b="symbol"===d(b)?
b:String(b);b in a?Object.defineProperty(a,b,{value:f,enumerable:!0,configurable:!0,writable:!0}):a[b]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):y(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function C(a){return D({id:fa(a.id),type:a.type},a.transports!=p&&{transports:a.transports})}function I(a){if("password"in a)return JSON.stringify({id:a.id,password:a.password});var b=a.response,
c={id:a.id,response:{clientDataJSON:(0,E.$_)(b.clientDataJSON),authenticatorData:(0,E.$_)(b.authenticatorData),signature:(0,E.$_)(b.signature)},clientExtensionResults:a.getClientExtensionResults(),type:a.type};null!=b.userHandle&&(c.response.userHandle=(0,E.$_)(b.userHandle));null!=a.authenticatorAttachment&&(c.authenticatorAttachment=a.authenticatorAttachment);return JSON.stringify(c)}function K(a){a=atob(a);a=ca(a);return{relyingPartyId:a.rpId,allowedCredentials:a.allowCredentials,challenge:a.challenge,
timeout:a.timeout,userVerification:a.userVerification,mediation:a.mediation}}function ca(a){return JSON.parse(a,function(a,b){return null===b?p:b})}function ea(a){return Uint8Array.from(a,function(a){return a.charCodeAt(0)}).buffer}function wa(a){return A.btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=*$/,"")}function fa(a){return ea(A.atob(a.replace(/-/g,"+").replace(/_/g,"/")))}function Sa(a){return Object.values(E.GG).includes(a.name)||Object.values(E.DO).includes(a.name)}function Ta(a){return Object.values(E.YG).includes(a.name)||
Object.values(E.UH).includes(a.name)}function ha(a){"@babel/helpers - typeof";return ha="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},ha(a)}function Da(a,b){for(var c=0;c<b.length;c++){var f=b[c];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,
ub(f.key),f)}}function tb(a,b,c){b&&Da(a.prototype,b);c&&Da(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function ub(a){a:if("object"===ha(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==p){a=b.call(a,"string");if("object"!==ha(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===ha(a)?a:String(a)}function M(a,b){return(new E.v1).createNativePasskeyCredential(a).then(function(a){return a})["catch"](function(a){b.publishErrorMetrics(a);
if(a instanceof E.KV){if(Sa(a)){var c;a=a.name===E.GG.AIPasskeyRegisterErrorSystem&&"1001"===(null===(c=a.iosErrorDetail)||void 0===c?void 0:c.code)?z.quickBuild(B.NotAllowedError):z.quickBuild(B.NativeCredentialCreationFailed);return a}if(Ta(a))return L(a)}return z.quickBuild(B.NativeCredentialCreationFailed)})}function L(a){switch(a.name){case E.YG.ENROLLMENT_CANCELLED:case E.YG.ENROLLMENT_TIMEOUT:case E.YG.ENROLLMENT_RE_ENROLL_CANCEL:return z.quickBuild(B.NotAllowedError);case E.YG.UNABLE_TO_ENROLL:return z.quickBuild(B.NativeDeviceIncapable);
case E.YG.ENROLLMENT_UNABLE_TO_VALIDATE:return z.quickBuild(B.NativeValidationFailure);case E.YG.ENROLLMENT_CREDENTIAL_EXISTS:return z.quickBuild(B.InvalidStateError);case E.YG.ENROLLMENT_REQUEST_JSON_PARSE_FAILED:return z.quickBuild(B.InvalidInput);default:return z.quickBuild(B.NativeCredentialCreationFailed)}}function N(a){"@babel/helpers - typeof";return N="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==
typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},N(a)}function wb(a,b){var c="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!c){if(Array.isArray(a)||(c=yb(a))||b&&a&&"number"===typeof a.length){c&&(a=c);var f=0;b=function(){};return{s:b,n:function(){return f>=a.length?{done:!0}:{done:!1,value:a[f++]}},e:function(a){throw a;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}var q=!0,d=!1,e;return{s:function(){c=c.call(a)},n:function(){var a=c.next();q=a.done;return a},e:function(a){d=!0;e=a},f:function(){try{if(!q&&null!=c["return"])c["return"]()}finally{if(d)throw e;}}}}function yb(a,b){if(a){if("string"===typeof a)return S(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);"Object"===c&&a.constructor&&(c=a.constructor.name);if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return S(a,b)}}function S(a,
b){if(null==b||b>a.length)b=a.length;for(var c=0,f=Array(b);c<b;c++)f[c]=a[c];return f}function W(a,b){for(var c=0;c<b.length;c++){var f=b[c];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,za(f.key),f)}}function R(a,b,c){b&&W(a.prototype,b);c&&W(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function za(a){a:if("object"===N(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==p){a=b.call(a,"string");if("object"!==N(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");
}a=String(a)}return"symbol"===N(a)?a:String(a)}function P(a,b){var c=X.getInstance().getConfig(["app_name"]);c=c?c:(0,G.getSanitizedClientNameByPath)();c="IdentityService.Passkey.".concat(c);var f="".concat(c,"_").concat("IdentityWebAuthnJSSDK","_").concat(a);f=b?"".concat(f,"_").concat(b):f;var q=Ya[f];if(q)return q;q=new G.IdentityKatalMetricsPublisher(c,"IdentityWebAuthnJSSDK",a,b);return Ya[f]=q}function V(a){var b=null!==a&&void 0!==a&&a.actionId?a.actionId:(0,G.generateUUID)(),c=[];if((new G.PlatformDetector).isRunningInWebView()){var f=
Ua(a);c.push(f);Va(null===a||void 0===a?void 0:a.isWebAuthnSupportedMobileConfig)&&(f=ia(a),c.push(f))}else f=ia(a),c.push(f);return Promise.all(c).then(function(c){c=c.every(function(a){return a});null!==a&&void 0!==a&&a.shouldDisableMetrics||Bb(c,b);return c})}function xa(){return new Promise(function(a,b){if((new G.PlatformDetector).isRunningInWebView()){b=X.getInstance();var c=(new G.PlatformDetector).getPlatform();if(b.getConfig([c,Y.ENROLLMENT_WEBLABS_RESULT]))a(!0);else(new E.v1).isMobileBetaProgram().then(function(b){a(b)})["catch"](function(b){console.error(b);
a(!1)})}else a(!0)})}function ya(a){var b=X.getInstance(),c=new G.PlatformDetector;return c.isRunningInWebView()&&(c=c.getPlatform(),(c===G.Platform.Android_App||c===G.Platform.iOS_App)&&b.getConfig([c,a]))?!0:!1}function ja(a){return new Promise(function(b,c){if((new G.PlatformDetector).isRunningInWebView())(new E.v1).checkDevicePasskeyCapability().then(function(c){c===E.Hy.SUPPORTED?a.publishCounterOnce("PasskeyEligibleSignIn"):c===E.Hy.UNSUPPORTED&&a.publishCounterOnce("PasskeyIneligibleSignIn");
b()})["catch"](function(a){console.error(a);b()});else ia({requireOnDeviceAuthenticatorAvailable:!0}).then(function(c){c?a.publishCounterOnce("PasskeyEligibleSignIn"):a.publishCounterOnce("PasskeyIneligibleSignIn");b()})})}function ia(a){return new Promise(function(b,c){vb(b,c,null===a||void 0===a?void 0:a.requireConditionalMediationAvailable,null===a||void 0===a?void 0:a.requireOnDeviceAuthenticatorAvailable)})}function Ua(a){return new Promise(function(b,c){Wa(b,a)})}function Va(a){var b=X.getInstance(),
c=(new G.PlatformDetector).getPlatform();if(c===G.Platform.Android_App||c===G.Platform.iOS_App){if(a)return!a[c].nativeEnable;if(b.getConfig([c,Y.NATIVE_ENABLE]))return!1}return!0}function vb(a,b){var c=2<arguments.length&&arguments[2]!==p?arguments[2]:!0,f=3<arguments.length&&arguments[3]!==p?arguments[3]:!1;if(A.PublicKeyCredential&&"function"===typeof A.PublicKeyCredential.isConditionalMediationAvailable&&"function"===typeof A.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable){var q=
[];c&&q.push(A.PublicKeyCredential.isConditionalMediationAvailable());f&&q.push(A.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable());Promise.all(q).then(function(b){a(b.reduce(function(a,b){return a&&b},!0))})["catch"](function(b){console.error(b);a(!1)})}else a(!1)}function Wa(a,b){var c=new E.v1;if(xb())a(!1);else c.isNativePasskeyAPIAvailable(b?{actionId:b.actionId,requireConditionalMediationAvailable:b.requireConditionalMediationAvailable,requireOnDeviceAuthenticatorAvailable:b.requireOnDeviceAuthenticatorAvailable,
webAuthnNativeConfig:b.isWebAuthnSupportedMobileConfig}:p).then(function(b){a(b)})["catch"](function(b){console.error(b);a(!1)})}function xb(){var a=new G.AmazonDomainHelper;return(new G.PlatformDetector).getPlatform()===G.Platform.Android_App&&"amazon.sg"===a.getMarketplaceDomain(A.location.hostname)?!0:!1}function Bb(a,b){P("isWebAuthnSupported",b).publishCounterOnce(String(a))}function Za(a){var b=new G.PlatformDetector;if(!b.isRunningInWebView())return p;var c=b.getPlatform();b=a.getActionId();
c="".concat(a.getSiteName(),"_").concat(c);a=a.getMethodName();return new G.IdentityKatalMetricsPublisher(c,Cb,a,b)}function ka(a){"@babel/helpers - typeof";return ka="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},ka(a)}function $a(a,b){for(var c=0;c<b.length;c++){var f=b[c];f.enumerable=
f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,Db(f.key),f)}}function Eb(a,b,c){b&&$a(a.prototype,b);c&&$a(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function Db(a){a:if("object"===ka(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==p){a=b.call(a,"string");if("object"!==ka(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===ka(a)?a:String(a)}function Fb(a,b){return navigator.credentials.create({publicKey:a}).then(function(a){return null==
a?z.quickBuild(B.CredentialCreationFailed):a})["catch"](function(a){console.warn(a);b.publishErrorMetrics(a);if(a instanceof DOMException){if("NotAllowedError"===a.name)return z.quickBuild(B.NotAllowedError);if("InvalidStateError"===a.name)return z.quickBuild(B.InvalidStateError);if("AbortError"===a.name)return z.quickBuild(B.AbortError)}return z.quickBuild(B.CredentialCreationFailed)})}function Z(a){"@babel/helpers - typeof";return Z="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===
typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},Z(a)}function Fa(){function a(a,b,c){return Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}),a[b]}function b(a,b,c,f){b=Object.create((b&&b.prototype instanceof d?b:d).prototype);f=new t(f||[]);return A(b,"_invoke",{value:l(a,c,f)}),b}function c(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(la){return{type:"throw",
arg:la}}}function d(){}function e(){}function g(){}function h(b){["next","throw","return"].forEach(function(c){a(b,c,function(a){return this._invoke(c,a)})})}function k(a,b){function f(q,d,e,T){q=c(a[q],a,d);if("throw"!==q.type){var Ga=q.arg;return(q=Ga.value)&&"object"==Z(q)&&x.call(q,"__await")?b.resolve(q.__await).then(function(a){f("next",a,e,T)},function(a){f("throw",a,e,T)}):b.resolve(q).then(function(a){Ga.value=a;e(Ga)},function(a){return f("throw",a,e,T)})}T(q.arg)}var q;A(this,"_invoke",
{value:function(a,c){function d(){return new b(function(b,q){f(a,c,b,q)})}return q=q?q.then(d,d):d()}})}function l(a,b,f){var q="suspendedStart";return function(d,e){if("executing"===q)throw Error("Generator is already running");if("completed"===q){if("throw"===d)throw e;return v()}f.method=d;for(f.arg=e;;){if(d=f.delegate)if(d=m(d,f)){if(d===O)continue;return d}if("next"===f.method)f.sent=f._sent=f.arg;else if("throw"===f.method){if("suspendedStart"===q)throw q="completed",f.arg;f.dispatchException(f.arg)}else"return"===
f.method&&f.abrupt("return",f.arg);q="executing";d=c(a,b,f);if("normal"===d.type){if(q=f.done?"completed":"suspendedYield",d.arg===O)continue;return{value:d.arg,done:f.done}}"throw"===d.type&&(q="completed",f.method="throw",f.arg=d.arg)}}}function m(a,b){var f=b.method,q=a.iterator[f];if(p===q)return b.delegate=null,"throw"===f&&a.iterator["return"]&&(b.method="return",b.arg=p,m(a,b),"throw"===b.method)||"return"!==f&&(b.method="throw",b.arg=new TypeError("The iterator does not provide a '"+f+"' method")),
O;f=c(q,a.iterator,b.arg);return"throw"===f.type?(b.method="throw",b.arg=f.arg,b.delegate=null,O):(f=f.arg)?f.done?(b[a.resultName]=f.value,b.next=a.nextLoc,"return"!==b.method&&(b.method="next",b.arg=p),b.delegate=null,O):f:(b.method="throw",b.arg=new TypeError("iterator result is not an object"),b.delegate=null,O)}function n(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]);2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]);this.tryEntries.push(b)}function r(a){var b=a.completion||{};b.type="normal";delete b.arg;
a.completion=b}function t(a){this.tryEntries=[{tryLoc:"root"}];a.forEach(n,this);this.reset(!0)}function u(a){if(a){var b=a[B];if(b)return b.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var c=-1;b=function H(){for(;++c<a.length;)if(x.call(a,c))return H.value=a[c],H.done=!1,H;return H.value=p,H.done=!0,H};return b.next=b}}return{next:v}}function v(){return{value:p,done:!0}}Fa=function(){return w};var w={},y=Object.prototype,x=y.hasOwnProperty,A=Object.defineProperty||function(a,
b,c){a[b]=c.value},z="function"==typeof Symbol?Symbol:{},B=z.iterator||"@@iterator",E=z.asyncIterator||"@@asyncIterator",D=z.toStringTag||"@@toStringTag";try{a({},"")}catch(T){a=function(a,b,c){return a[b]=c}}w.wrap=b;var O={};z={};a(z,B,function(){return this});var C=Object.getPrototypeOf;(C=C&&C(C(u([]))))&&C!==y&&x.call(C,B)&&(z=C);var F=g.prototype=d.prototype=Object.create(z);return e.prototype=g,A(F,"constructor",{value:g,configurable:!0}),A(g,"constructor",{value:e,configurable:!0}),e.displayName=
a(g,D,"GeneratorFunction"),w.isGeneratorFunction=function(a){a="function"==typeof a&&a.constructor;return!!a&&(a===e||"GeneratorFunction"===(a.displayName||a.name))},w.mark=function(b){return Object.setPrototypeOf?Object.setPrototypeOf(b,g):(b.__proto__=g,a(b,D,"GeneratorFunction")),b.prototype=Object.create(F),b},w.awrap=function(a){return{__await:a}},h(k.prototype),a(k.prototype,E,function(){return this}),w.AsyncIterator=k,w.async=function(a,c,f,q,d){void 0===d&&(d=Promise);var e=new k(b(a,c,f,
q),d);return w.isGeneratorFunction(c)?e:e.next().then(function(a){return a.done?a.value:e.next()})},h(F),a(F,D,"Generator"),a(F,B,function(){return this}),a(F,"toString",function(){return"[object Generator]"}),w.keys=function(a){var b=Object(a),c=[],f;for(f in b)c.push(f);return c.reverse(),function J(){for(;c.length;){var a=c.pop();if(a in b)return J.value=a,J.done=!1,J}return J.done=!0,J}},w.values=u,t.prototype={constructor:t,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=p,
this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(r),!a)for(var b in this)"t"===b.charAt(0)&&x.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=p)},stop:function(){this.done=!0;var a=this.tryEntries[0].completion;if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function(a){function b(b,f){return d.type="throw",d.arg=a,c.next=b,f&&(c.method="next",c.arg=p),!!f}if(this.done)throw a;for(var c=this,f=this.tryEntries.length-1;0<=f;--f){var q=this.tryEntries[f],
d=q.completion;if("root"===q.tryLoc)return b("end");if(q.tryLoc<=this.prev){var e=x.call(q,"catchLoc"),g=x.call(q,"finallyLoc");if(e&&g){if(this.prev<q.catchLoc)return b(q.catchLoc,!0);if(this.prev<q.finallyLoc)return b(q.finallyLoc)}else if(e){if(this.prev<q.catchLoc)return b(q.catchLoc,!0)}else{if(!g)throw Error("try statement without catch or finally");if(this.prev<q.finallyLoc)return b(q.finallyLoc)}}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;0<=c;--c){var f=this.tryEntries[c];
if(f.tryLoc<=this.prev&&x.call(f,"finallyLoc")&&this.prev<f.finallyLoc){var q=f;break}}q&&("break"===a||"continue"===a)&&q.tryLoc<=b&&b<=q.finallyLoc&&(q=null);c=q?q.completion:{};return c.type=a,c.arg=b,q?(this.method="next",this.next=q.finallyLoc,O):this.complete(c)},complete:function(a,b){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&b&&(this.next=b),
O},finish:function(a){for(var b=this.tryEntries.length-1;0<=b;--b){var c=this.tryEntries[b];if(c.finallyLoc===a)return this.complete(c.completion,c.afterLoc),r(c),O}},"catch":function(a){for(var b=this.tryEntries.length-1;0<=b;--b){var c=this.tryEntries[b];if(c.tryLoc===a){a=c.completion;if("throw"===a.type){var f=a.arg;r(c)}return f}}throw Error("illegal catch attempt");},delegateYield:function(a,b,c){return this.delegate={iterator:u(a),resultName:b,nextLoc:c},"next"===this.method&&(this.arg=p),
O}},w}function ab(a,b){for(var c=0;c<b.length;c++){var f=b[c];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,Gb(f.key),f)}}function Hb(a,b,c){b&&ab(a.prototype,b);c&&ab(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function Gb(a){a:if("object"===Z(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==p){a=b.call(a,"string");if("object"!==Z(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===
Z(a)?a:String(a)}function bb(a,b,c,d,e,g,h){try{var f=a[g](h),q=f.value}catch(ma){c(ma);return}f.done?b(q):Promise.resolve(q).then(d,e)}function Ib(a){return function(){var b=this,c=arguments;return new Promise(function(f,q){function d(a){bb(g,f,q,d,e,"next",a)}function e(a){bb(g,f,q,d,e,"throw",a)}var g=a.apply(b,c);d(p)})}}function cb(a,b){return Ha.apply(this,arguments)}function Ha(){Ha=Ib(Fa().mark(function Ea(a,b){var c,q,d,e;return Fa().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return c=
Jb.getInstance(),q=Za(b),d=new Ia(q?q:b),null===q||void 0===q?void 0:q.publishCounterOnce("Start"),g.next=6,c.create(a,d);case 6:return e=g.sent,e instanceof z||(null===q||void 0===q?void 0:q.publishCounterOnce("Success")),g.abrupt("return",e);case 9:case "end":return g.stop()}},Ea)}));return Ha.apply(this,arguments)}function na(a){"@babel/helpers - typeof";return na="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&
"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},na(a)}function db(a,b){for(var c=0;c<b.length;c++){var f=b[c];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,Kb(f.key),f)}}function Lb(a,b,c){b&&db(a.prototype,b);c&&db(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function Kb(a){a:if("object"===na(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==p){a=b.call(a,
"string");if("object"!==na(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===na(a)?a:String(a)}function Mb(a,b){a={relyingPartyId:a.relyingPartyId,challenge:a.challenge,timeout:a.timeout,allowedCredentials:a.allowedCredentials,userVerification:a.userVerification,mediation:a.mediation,autofillMode:a.autofillMode,preferImmediatelyAvailableCredentials:a.preferImmediatelyAvailableCredentials};return(new E.v1).getNativePasskeyCredential(a).then(function(a){return a})["catch"](function(a){b.publishErrorMetrics(a);
if(a instanceof E.KV){if(Sa(a)){var c;if(a.name===E.DO.AIPasskeyAuthErrorSystem&&"1001"===(null===(c=a.iosErrorDetail)||void 0===c?void 0:c.code)){var f,d;a=null!==(f=a.iosErrorDetail)&&void 0!==f&&null!==(d=f.message)&&void 0!==d&&d.includes("No credentials available for login")?z.quickBuild(B.NoCredentialsError):z.quickBuild(B.NotAllowedError)}else a=z.quickBuild(B.NativeCredentialRetrievalFailed);return a}if(Ta(a))return Nb(a)}return z.quickBuild(B.NativeCredentialRetrievalFailed)})}function Nb(a){switch(a.name){case E.UH.AUTHENTICATION_NO_MATCHING_CREDENTIALS:return z.quickBuild(B.NoCredentialsError);
case E.UH.AUTHENTICATION_CANCELLED:case E.UH.AUTHENTICATION_TIMEOUT:return z.quickBuild(B.NotAllowedError);case E.UH.UNABLE_TO_AUTHENTICATE:return z.quickBuild(B.NativeDeviceIncapable);case E.UH.AUTHENTICATION_REQUEST_JSON_PARSE_FAILED:return z.quickBuild(B.InvalidInput);default:return z.quickBuild(B.NativeCredentialRetrievalFailed)}}function oa(a){"@babel/helpers - typeof";return oa="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:
function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},oa(a)}function eb(a,b){for(var c=0;c<b.length;c++){var f=b[c];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,fb(f.key),f)}}function Ob(a,b,c){b&&eb(a.prototype,b);c&&eb(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function gb(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var f=
Object.getOwnPropertySymbols(a);b&&(f=f.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));c.push.apply(c,f)}return c}function Pb(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?gb(Object(c),!0).forEach(function(b){var f=c[b];b=fb(b);b in a?Object.defineProperty(a,b,{value:f,enumerable:!0,configurable:!0,writable:!0}):a[b]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):gb(Object(c)).forEach(function(b){Object.defineProperty(a,
b,Object.getOwnPropertyDescriptor(c,b))})}return a}function fb(a){a:if("object"===oa(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==p){a=b.call(a,"string");if("object"!==oa(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===oa(a)?a:String(a)}function Qb(a,b){var c,f={rpId:a.relyingPartyId,allowCredentials:null===(c=a.allowedCredentials)||void 0===c?void 0:c.map(C),challenge:fa(a.challenge),userVerification:a.userVerification,timeout:a.timeout};
return navigator.credentials.get(Pb({publicKey:f,mediation:a.mediation},!!a.signal&&{signal:a.signal})).then(function(a){return a})["catch"](function(c){console.warn(c);b.publishErrorMetrics(c);if(c instanceof DOMException){if("NotAllowedError"===c.name)return z.quickBuild(B.NotAllowedError);if("InvalidStateError"===c.name)return z.quickBuild(B.InvalidStateError);if("AbortError"===c.name)return a.signal?z.quickBuild(B.AbortError,p,a.signal.reason):z.quickBuild(B.UnexpectedAbortError)}return a.signal&&
c===a.signal.reason?z.quickBuild(B.AbortError,p,a.signal.reason):z.quickBuild(B.CredentialRetrievalFailed)})}function aa(a){"@babel/helpers - typeof";return aa="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},aa(a)}function Ja(){function a(a,b,c){return Object.defineProperty(a,b,{value:c,enumerable:!0,
configurable:!0,writable:!0}),a[b]}function b(a,b,c,f){b=Object.create((b&&b.prototype instanceof d?b:d).prototype);f=new t(f||[]);return A(b,"_invoke",{value:l(a,c,f)}),b}function c(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(la){return{type:"throw",arg:la}}}function d(){}function e(){}function g(){}function h(b){["next","throw","return"].forEach(function(c){a(b,c,function(a){return this._invoke(c,a)})})}function k(a,b){function f(d,q,e,g){d=c(a[d],a,q);if("throw"!==d.type){var h=d.arg;
return(d=h.value)&&"object"==aa(d)&&y.call(d,"__await")?b.resolve(d.__await).then(function(a){f("next",a,e,g)},function(a){f("throw",a,e,g)}):b.resolve(d).then(function(a){h.value=a;e(h)},function(a){return f("throw",a,e,g)})}g(d.arg)}var d;A(this,"_invoke",{value:function(a,c){function q(){return new b(function(b,d){f(a,c,b,d)})}return d=d?d.then(q,q):q()}})}function l(a,b,f){var d="suspendedStart";return function(q,e){if("executing"===d)throw Error("Generator is already running");if("completed"===
d){if("throw"===q)throw e;return v()}f.method=q;for(f.arg=e;;){if(q=f.delegate)if(q=m(q,f)){if(q===D)continue;return q}if("next"===f.method)f.sent=f._sent=f.arg;else if("throw"===f.method){if("suspendedStart"===d)throw d="completed",f.arg;f.dispatchException(f.arg)}else"return"===f.method&&f.abrupt("return",f.arg);d="executing";q=c(a,b,f);if("normal"===q.type){if(d=f.done?"completed":"suspendedYield",q.arg===D)continue;return{value:q.arg,done:f.done}}"throw"===q.type&&(d="completed",f.method="throw",
f.arg=q.arg)}}}function m(a,b){var f=b.method,d=a.iterator[f];if(p===d)return b.delegate=null,"throw"===f&&a.iterator["return"]&&(b.method="return",b.arg=p,m(a,b),"throw"===b.method)||"return"!==f&&(b.method="throw",b.arg=new TypeError("The iterator does not provide a '"+f+"' method")),D;f=c(d,a.iterator,b.arg);return"throw"===f.type?(b.method="throw",b.arg=f.arg,b.delegate=null,D):(f=f.arg)?f.done?(b[a.resultName]=f.value,b.next=a.nextLoc,"return"!==b.method&&(b.method="next",b.arg=p),b.delegate=
null,D):f:(b.method="throw",b.arg=new TypeError("iterator result is not an object"),b.delegate=null,D)}function n(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]);2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]);this.tryEntries.push(b)}function r(a){var b=a.completion||{};b.type="normal";delete b.arg;a.completion=b}function t(a){this.tryEntries=[{tryLoc:"root"}];a.forEach(n,this);this.reset(!0)}function u(a){if(a){var b=a[B];if(b)return b.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var c=
-1;b=function H(){for(;++c<a.length;)if(y.call(a,c))return H.value=a[c],H.done=!1,H;return H.value=p,H.done=!0,H};return b.next=b}}return{next:v}}function v(){return{value:p,done:!0}}Ja=function(){return w};var w={},x=Object.prototype,y=x.hasOwnProperty,A=Object.defineProperty||function(a,b,c){a[b]=c.value},z="function"==typeof Symbol?Symbol:{},B=z.iterator||"@@iterator",C=z.asyncIterator||"@@asyncIterator",E=z.toStringTag||"@@toStringTag";try{a({},"")}catch(T){a=function(a,b,c){return a[b]=c}}w.wrap=
b;var D={};z={};a(z,B,function(){return this});var F=Object.getPrototypeOf;(F=F&&F(F(u([]))))&&F!==x&&y.call(F,B)&&(z=F);var G=g.prototype=d.prototype=Object.create(z);return e.prototype=g,A(G,"constructor",{value:g,configurable:!0}),A(g,"constructor",{value:e,configurable:!0}),e.displayName=a(g,E,"GeneratorFunction"),w.isGeneratorFunction=function(a){a="function"==typeof a&&a.constructor;return!!a&&(a===e||"GeneratorFunction"===(a.displayName||a.name))},w.mark=function(b){return Object.setPrototypeOf?
Object.setPrototypeOf(b,g):(b.__proto__=g,a(b,E,"GeneratorFunction")),b.prototype=Object.create(G),b},w.awrap=function(a){return{__await:a}},h(k.prototype),a(k.prototype,C,function(){return this}),w.AsyncIterator=k,w.async=function(a,c,f,d,q){void 0===q&&(q=Promise);var e=new k(b(a,c,f,d),q);return w.isGeneratorFunction(c)?e:e.next().then(function(a){return a.done?a.value:e.next()})},h(G),a(G,E,"Generator"),a(G,B,function(){return this}),a(G,"toString",function(){return"[object Generator]"}),w.keys=
function(a){var b=Object(a),c=[],f;for(f in b)c.push(f);return c.reverse(),function J(){for(;c.length;){var a=c.pop();if(a in b)return J.value=a,J.done=!1,J}return J.done=!0,J}},w.values=u,t.prototype={constructor:t,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(r),!a)for(var b in this)"t"===b.charAt(0)&&y.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=p)},stop:function(){this.done=!0;var a=this.tryEntries[0].completion;
if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function(a){function b(b,f){return q.type="throw",q.arg=a,c.next=b,f&&(c.method="next",c.arg=p),!!f}if(this.done)throw a;for(var c=this,f=this.tryEntries.length-1;0<=f;--f){var d=this.tryEntries[f],q=d.completion;if("root"===d.tryLoc)return b("end");if(d.tryLoc<=this.prev){var e=y.call(d,"catchLoc"),g=y.call(d,"finallyLoc");if(e&&g){if(this.prev<d.catchLoc)return b(d.catchLoc,!0);if(this.prev<d.finallyLoc)return b(d.finallyLoc)}else if(e){if(this.prev<
d.catchLoc)return b(d.catchLoc,!0)}else{if(!g)throw Error("try statement without catch or finally");if(this.prev<d.finallyLoc)return b(d.finallyLoc)}}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;0<=c;--c){var f=this.tryEntries[c];if(f.tryLoc<=this.prev&&y.call(f,"finallyLoc")&&this.prev<f.finallyLoc){var d=f;break}}d&&("break"===a||"continue"===a)&&d.tryLoc<=b&&b<=d.finallyLoc&&(d=null);c=d?d.completion:{};return c.type=a,c.arg=b,d?(this.method="next",this.next=d.finallyLoc,D):this.complete(c)},
complete:function(a,b){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&b&&(this.next=b),D},finish:function(a){for(var b=this.tryEntries.length-1;0<=b;--b){var c=this.tryEntries[b];if(c.finallyLoc===a)return this.complete(c.completion,c.afterLoc),r(c),D}},"catch":function(a){for(var b=this.tryEntries.length-1;0<=b;--b){var c=this.tryEntries[b];if(c.tryLoc===
a){a=c.completion;if("throw"===a.type){var f=a.arg;r(c)}return f}}throw Error("illegal catch attempt");},delegateYield:function(a,b,c){return this.delegate={iterator:u(a),resultName:b,nextLoc:c},"next"===this.method&&(this.arg=p),D}},w}function hb(a,b){for(var c=0;c<b.length;c++){var f=b[c];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,Rb(f.key),f)}}function Sb(a,b,c){b&&hb(a.prototype,b);c&&hb(a,c);Object.defineProperty(a,"prototype",{writable:!1});
return a}function Rb(a){a:if("object"===aa(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==p){a=b.call(a,"string");if("object"!==aa(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===aa(a)?a:String(a)}function ib(a,b,c,d,e,g,h){try{var f=a[g](h),q=f.value}catch(ma){c(ma);return}f.done?b(q):Promise.resolve(q).then(d,e)}function Tb(a){return function(){var b=this,c=arguments;return new Promise(function(f,d){function q(a){ib(g,f,d,q,e,"next",
a)}function e(a){ib(g,f,d,q,e,"throw",a)}var g=a.apply(b,c);q(p)})}}function Ka(a,b){return La.apply(this,arguments)}function La(){La=Tb(Ja().mark(function Ea(a,b){var c,d,q,e;return Ja().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return c=Ub.getInstance("conditional"===a.mediation),d=Za(b),q=new Ia(d?d:b),null===d||void 0===d?void 0:d.publishCounterOnce("Start"),g.next=6,c.get(a,q);case 6:return e=g.sent,e instanceof z||(null===d||void 0===d?void 0:d.publishCounterOnce("Success")),g.abrupt("return",
e);case 9:case "end":return g.stop()}},Ea)}));return La.apply(this,arguments)}function pa(a){"@babel/helpers - typeof";return pa="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},pa(a)}function jb(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);
b&&(f=f.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));c.push.apply(c,f)}return c}function kb(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?jb(Object(c),!0).forEach(function(b){var f=c[b];a:if("object"===pa(b)&&null!==b){var d=b[Symbol.toPrimitive];if(d!==p){b=d.call(b,"string");if("object"!==pa(b))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}b=String(b)}b="symbol"===pa(b)?b:String(b);b in a?Object.defineProperty(a,
b,{value:f,enumerable:!0,configurable:!0,writable:!0}):a[b]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):jb(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function Vb(a){var b=new URL(A.origin);b.pathname="/ax/claim/webauthn/enroll";b.searchParams.append("operation","startEnroll");a.associationHandle&&b.searchParams.append("openid.assoc_handle",a.associationHandle);a.pageType&&b.searchParams.append("pageType",
a.pageType);a.returnTo&&b.searchParams.append("returnTo",a.returnTo);var c={"action-id":a.actionId},d;a.enrollWorkflowName&&(d={enrollWorkflowName:a.enrollWorkflowName});return Aa(b,d,c).then(function(a){return a.json().then(function(b){if(a.ok){var c=atob(b.webAuthNCreateParameters);c=ca(c);c.rp=D({name:c.relyingParty.relyingPartyName},c.relyingParty.relyingPartyId!=p&&{id:c.relyingParty.relyingPartyId});delete c.relyingParty;c.excludeCredentials!=p&&(c.excludeCredentials=c.excludeCredentials.map(C));
c.user.id=ea(c.user.id);c.challenge=fa(c.challenge);return{credentialParameters:c,challengeId:b.webAuthNChallengeId,arb:b.arb}}return Ba(b,a.status)})})["catch"](Ca)}function Wb(a){var b=new URL(A.origin);b.pathname="/ax/claim/webauthn/enroll";b.searchParams.append("operation","completeEnroll");a.associationHandle&&b.searchParams.append("openid.assoc_handle",a.associationHandle);var c=kb({authenticatorAttestation:a.authenticatorAttestation,challengeId:a.challengeId,arb:a.arb},a.enrollWorkflowName&&
{enrollWorkflowName:a.enrollWorkflowName});return Aa(b,c,{"action-id":a.actionId}).then(function(a){return a.ok?{}:a.json().then(function(b){return Ba(b,a.status)})})["catch"](Ca)}function Xb(a){var b=new URL(A.origin);b.pathname="/ax/claim/webauthn/remove";if("undefined"!==typeof a.kavachCredentialList){var c;b.searchParams.append("operation","removeSpecifiedPasskeys");null===(c=a.kavachCredentialList)||void 0===c?void 0:c.forEach(function(a){b.searchParams.append("kavachCredentialList",a)})}else b.searchParams.append("operation",
"removeEnrolledPasskeys");a.associationHandle&&b.searchParams.append("openid.assoc_handle",a.associationHandle);return Aa(b,p,{"action-id":a.actionId}).then(function(a){return a.ok?{}:a.json().then(function(b){return Ba(b,a.status)})})["catch"](Ca)}function Yb(a){var b=new URL(A.origin);b.pathname="/ax/claim/webauthn/auth";b.searchParams.append("operation","completePasskeyAuth");return Aa(b,{authenticationAssertion:a.authenticationAssertion,challengeId:a.challengeId,arb:a.arb}).then(function(a){return a.json().then(function(b){return a.ok?
qa.success(b.arb):Ba(b,a.status)})})["catch"](Ca)}function Zb(){var a=new URL(A.origin);a.pathname="/ax/claim/webauthn/auth";return fetch(a).then(function(a){return a.ok?(a=a.headers.get("x-csrf-token"))?a:Promise.reject(z.quickBuild(B.MissingCsrfToken)):Promise.reject(z.quickBuild(B.MissingCsrfToken))})["catch"](function(a){return Promise.reject(z.quickBuild(B.MissingCsrfToken))})}function Aa(a,b,c){return $b().then(function(d){d={method:"POST",headers:kb({"anti-csrftoken-a2z":d},c)};b&&(d.body=
new URLSearchParams(Object.entries(b)));return fetch(a,d)})}function $b(){var a,b=null===(a=document.querySelector('input[name\x3d"csrf-token"]'))||void 0===a?void 0:a.getAttribute("value");return b?Promise.resolve(b):Zb()}function Ba(a,b){if(500<=b&&600>b)return z.quickBuild(B.InternalFailure);switch(a.error){case "UnauthorizedAccess":return z.quickBuild(B.UnauthorizedAccess,a.redirectTo);case "EnrollmentFailure":return z.quickBuild(B.EnrollmentFailed);case "IneligibleError":case "WeblabNotEnabled":case "InvalidDevice":case "InvalidInput":return z.quickBuild(B.InvalidInput);
case "WebAuthNValidationFailure":return z.quickBuild(B.ValidationFailure);case "CredentialNotFound":return z.quickBuild(B.CredentialNotFound);case "InternalFailure":case "RetryableInternalFailure":return z.quickBuild(B.InternalFailure)}return z.quickBuild(B.UnrecognizedFailure)}function Ca(a){return a instanceof Error?(console.log(a),z.quickBuild(B.NetworkFailure)):a}function ac(a){V({requireConditionalMediationAvailable:!0,requireOnDeviceAuthenticatorAvailable:!0,shouldDisableMetrics:!0,isWebAuthnSupportedMobileConfig:null===
a||void 0===a?void 0:a.isWebAuthnSupportedMobileConfig}).then(function(a){document.cookie="id_pkel\x3dn"+(a?"1":"0")+"; expires\x3d"+(new Date(Date.now()+9E5)).toUTCString()+"; path\x3d/; secure; samesite\x3dstrict;"})["catch"](function(a){console.error(a)})}function ra(a){"@babel/helpers - typeof";return ra="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==
Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},ra(a)}function lb(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,bc(d.key),d)}}function cc(a,b,c){b&&lb(a.prototype,b);c&&lb(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function bc(a){a:if("object"===ra(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==p){a=b.call(a,"string");if("object"!==ra(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");
}a=String(a)}return"symbol"===ra(a)?a:String(a)}function dc(a){try{return A.PublicKeyCredential.getClientCapabilities().then(function(a){return null==a?z.quickBuild(B.GetClientCapabilitiesFailed):a})["catch"](function(b){console.warn(b);a.publishErrorMetrics(b);return b instanceof DOMException&&"NotAllowedError"===b.name?z.quickBuild(B.NotAllowedError,p,p,b):z.quickBuild(B.GetClientCapabilitiesFailed,p,p,b)})}catch(q){return console.warn(q),a.publishErrorMetrics(q),Promise.resolve(z.quickBuild(B.GetClientCapabilitiesFailed,
p,p,q))}}function ba(a){"@babel/helpers - typeof";return ba="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},ba(a)}function Ma(){function a(a,b,c){return Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}),a[b]}function b(a,b,c,f){b=Object.create((b&&b.prototype instanceof
d?b:d).prototype);f=new t(f||[]);return A(b,"_invoke",{value:l(a,c,f)}),b}function c(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(la){return{type:"throw",arg:la}}}function d(){}function e(){}function g(){}function h(b){["next","throw","return"].forEach(function(c){a(b,c,function(a){return this._invoke(c,a)})})}function k(a,b){function d(f,e,q,g){f=c(a[f],a,e);if("throw"!==f.type){var h=f.arg;return(f=h.value)&&"object"==ba(f)&&x.call(f,"__await")?b.resolve(f.__await).then(function(a){d("next",
a,q,g)},function(a){d("throw",a,q,g)}):b.resolve(f).then(function(a){h.value=a;q(h)},function(a){return d("throw",a,q,g)})}g(f.arg)}var f;A(this,"_invoke",{value:function(a,c){function e(){return new b(function(b,f){d(a,c,b,f)})}return f=f?f.then(e,e):e()}})}function l(a,b,d){var f="suspendedStart";return function(e,q){if("executing"===f)throw Error("Generator is already running");if("completed"===f){if("throw"===e)throw q;return w()}d.method=e;for(d.arg=q;;){if(e=d.delegate)if(e=m(e,d)){if(e===C)continue;
return e}if("next"===d.method)d.sent=d._sent=d.arg;else if("throw"===d.method){if("suspendedStart"===f)throw f="completed",d.arg;d.dispatchException(d.arg)}else"return"===d.method&&d.abrupt("return",d.arg);f="executing";e=c(a,b,d);if("normal"===e.type){if(f=d.done?"completed":"suspendedYield",e.arg===C)continue;return{value:e.arg,done:d.done}}"throw"===e.type&&(f="completed",d.method="throw",d.arg=e.arg)}}}function m(a,b){var d=b.method,f=a.iterator[d];if(p===f)return b.delegate=null,"throw"===d&&
a.iterator["return"]&&(b.method="return",b.arg=p,m(a,b),"throw"===b.method)||"return"!==d&&(b.method="throw",b.arg=new TypeError("The iterator does not provide a '"+d+"' method")),C;d=c(f,a.iterator,b.arg);return"throw"===d.type?(b.method="throw",b.arg=d.arg,b.delegate=null,C):(d=d.arg)?d.done?(b[a.resultName]=d.value,b.next=a.nextLoc,"return"!==b.method&&(b.method="next",b.arg=p),b.delegate=null,C):d:(b.method="throw",b.arg=new TypeError("iterator result is not an object"),b.delegate=null,C)}function n(a){var b=
{tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]);2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]);this.tryEntries.push(b)}function r(a){var b=a.completion||{};b.type="normal";delete b.arg;a.completion=b}function t(a){this.tryEntries=[{tryLoc:"root"}];a.forEach(n,this);this.reset(!0)}function u(a){if(a){var b=a[B];if(b)return b.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var c=-1;b=function H(){for(;++c<a.length;)if(x.call(a,c))return H.value=a[c],H.done=!1,H;return H.value=p,H.done=!0,H};
return b.next=b}}return{next:w}}function w(){return{value:p,done:!0}}Ma=function(){return v};var v={},y=Object.prototype,x=y.hasOwnProperty,A=Object.defineProperty||function(a,b,c){a[b]=c.value},z="function"==typeof Symbol?Symbol:{},B=z.iterator||"@@iterator",D=z.asyncIterator||"@@asyncIterator",F=z.toStringTag||"@@toStringTag";try{a({},"")}catch(T){a=function(a,b,c){return a[b]=c}}v.wrap=b;var C={};z={};a(z,B,function(){return this});var E=Object.getPrototypeOf;(E=E&&E(E(u([]))))&&E!==y&&x.call(E,
B)&&(z=E);var G=g.prototype=d.prototype=Object.create(z);return e.prototype=g,A(G,"constructor",{value:g,configurable:!0}),A(g,"constructor",{value:e,configurable:!0}),e.displayName=a(g,F,"GeneratorFunction"),v.isGeneratorFunction=function(a){a="function"==typeof a&&a.constructor;return!!a&&(a===e||"GeneratorFunction"===(a.displayName||a.name))},v.mark=function(b){return Object.setPrototypeOf?Object.setPrototypeOf(b,g):(b.__proto__=g,a(b,F,"GeneratorFunction")),b.prototype=Object.create(G),b},v.awrap=
function(a){return{__await:a}},h(k.prototype),a(k.prototype,D,function(){return this}),v.AsyncIterator=k,v.async=function(a,c,d,f,e){void 0===e&&(e=Promise);var q=new k(b(a,c,d,f),e);return v.isGeneratorFunction(c)?q:q.next().then(function(a){return a.done?a.value:q.next()})},h(G),a(G,F,"Generator"),a(G,B,function(){return this}),a(G,"toString",function(){return"[object Generator]"}),v.keys=function(a){var b=Object(a),c=[],d;for(d in b)c.push(d);return c.reverse(),function J(){for(;c.length;){var a=
c.pop();if(a in b)return J.value=a,J.done=!1,J}return J.done=!0,J}},v.values=u,t.prototype={constructor:t,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(r),!a)for(var b in this)"t"===b.charAt(0)&&x.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=p)},stop:function(){this.done=!0;var a=this.tryEntries[0].completion;if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function(a){function b(b,
d){return e.type="throw",e.arg=a,c.next=b,d&&(c.method="next",c.arg=p),!!d}if(this.done)throw a;for(var c=this,d=this.tryEntries.length-1;0<=d;--d){var f=this.tryEntries[d],e=f.completion;if("root"===f.tryLoc)return b("end");if(f.tryLoc<=this.prev){var q=x.call(f,"catchLoc"),g=x.call(f,"finallyLoc");if(q&&g){if(this.prev<f.catchLoc)return b(f.catchLoc,!0);if(this.prev<f.finallyLoc)return b(f.finallyLoc)}else if(q){if(this.prev<f.catchLoc)return b(f.catchLoc,!0)}else{if(!g)throw Error("try statement without catch or finally");
if(this.prev<f.finallyLoc)return b(f.finallyLoc)}}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;0<=c;--c){var d=this.tryEntries[c];if(d.tryLoc<=this.prev&&x.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var f=d;break}}f&&("break"===a||"continue"===a)&&f.tryLoc<=b&&b<=f.finallyLoc&&(f=null);c=f?f.completion:{};return c.type=a,c.arg=b,f?(this.method="next",this.next=f.finallyLoc,C):this.complete(c)},complete:function(a,b){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===
a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&b&&(this.next=b),C},finish:function(a){for(var b=this.tryEntries.length-1;0<=b;--b){var c=this.tryEntries[b];if(c.finallyLoc===a)return this.complete(c.completion,c.afterLoc),r(c),C}},"catch":function(a){for(var b=this.tryEntries.length-1;0<=b;--b){var c=this.tryEntries[b];if(c.tryLoc===a){a=c.completion;if("throw"===a.type){var d=a.arg;r(c)}return d}}throw Error("illegal catch attempt");
},delegateYield:function(a,b,c){return this.delegate={iterator:u(a),resultName:b,nextLoc:c},"next"===this.method&&(this.arg=p),C}},v}function mb(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,ec(d.key),d)}}function fc(a,b,c){b&&mb(a.prototype,b);c&&mb(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function ec(a){a:if("object"===ba(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==p){a=
b.call(a,"string");if("object"!==ba(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===ba(a)?a:String(a)}function nb(a,b,c,d,e,g,h){try{var f=a[g](h),q=f.value}catch(ma){c(ma);return}f.done?b(q):Promise.resolve(q).then(d,e)}function gc(a){return function(){var b=this,c=arguments;return new Promise(function(d,f){function e(a){nb(g,d,f,e,q,"next",a)}function q(a){nb(g,d,f,e,q,"throw",a)}var g=a.apply(b,c);e(p)})}}function hc(a){return Na.apply(this,
arguments)}function Na(){Na=gc(Ma().mark(function zb(a){var b,c;return Ma().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return b=ic.getInstance(),c=new Ia(a),d.next=4,b.get(c);case 4:return d.abrupt("return",d.sent);case 5:case "end":return d.stop()}},zb)}));return Na.apply(this,arguments)}function sa(a){"@babel/helpers - typeof";return sa="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":u(a)}:function(a){return a&&"function"==typeof Symbol&&
a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":u(a)},sa(a)}function ob(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));c.push.apply(c,d)}return c}function U(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?ob(Object(c),!0).forEach(function(b){var d=c[b];b=pb(b);b in a?Object.defineProperty(a,
b,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[b]=d}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):ob(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function qb(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,pb(d.key),d)}}function jc(a,b,c){b&&qb(a.prototype,b);c&&qb(a,c);Object.defineProperty(a,
"prototype",{writable:!1});return a}function pb(a){a:if("object"===sa(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==p){a=b.call(a,"string");if("object"!==sa(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===sa(a)?a:String(a)}function Q(a){return a.then(function(a){return a instanceof z&&a.errorCodes&&a.errorCodes.every(function(a){return Object.values(B).includes(a)})?Promise.reject(a):a})}function ta(a,b,c){a instanceof Error&&(console.error(a),
c.publishStringTruncate(a.name,a.message),a=z.quickBuild(B.UnrecognizedFailure));c.publishCounterOnce(a.errorCodes[0]);return b(a)}function kc(){return new lc}F.r(da);F.d(da,{ClientCapabilities:function(){return mc},EnrollWorkflowName:function(){return nc},FetchPasskeySignInAssertionResponse:function(){return Oa},GetClientCapabilitiesResponse:function(){return Pa},MobileWebAuthnConfigKeys:function(){return Y},PageType:function(){return oc},WebAuthnEnrollResponse:function(){return Qa},WebAuthnErrorCode:function(){return B},
WebAuthnErrorDetails:function(){return z},WebAuthnRemoveResponse:function(){return Ra},WebAuthnSignInResponse:function(){return qa},createCredential:function(){return cb},defaultConfig:function(){return rb},getCredential:function(){return Ka},getWebAuthn:function(){return kc}});var rb={ios_app:{nativeEnable:!0,useNativeBridgeForEnroll:!1,useNativeBridgeForSignIn:!0,useNativeBridgeForAutofill:!0,launchedApps:"com.amazon.MAPiOSLibSampleApp com.amazon.Amazon.dev com.amazon.Amazon.Enterprise com.amazon.Amazon.development com.amazon.AmazonIN.Enterprise com.amazon.AmazonUK.Enterprise com.amazon.AmazonDE.Enterprise com.amazon.AmazonFR.Enterprise com.amazon.AmazonJP.Enterprise com.amazon.Amazon com.amazon.AmazonUK com.amazon.AmazonIN com.amazon.AmazonUK com.amazon.AmazonDE com.amazon.AmazonFR com.amazon.AmazonJP".split(" "),
enrollmentWeblabsResult:!1},android_app:{nativeEnable:!0,useNativeBridgeForEnroll:!0,useNativeBridgeForSignIn:!0,useNativeBridgeForAutofill:!0,launchedApps:["com.amazon.map.sample.one","com.amazon.mShop.android.beta","com.amazon.mShop.android.shopping","in.amazon.mShop.android.shopping"],enrollmentWeblabsResult:!1}},B=function(a){a.NotAllowedError="ClientError_NotAllowedError";a.NoCredentialsError="ClientError_NoCredentialsError";a.InvalidStateError="ClientError_InvalidStateError";a.UnauthorizedAccess=
"ClientError_UnauthorizedAccess";a.NetworkFailure="ClientError_NetworkFailure";a.CredentialCreationFailed="ClientError_CredentialCreationFailed";a.NativeCredentialCreationFailed="ClientError_NativeCredentialCreationFailed";a.CredentialRetrievalFailed="ClientError_CredentialRetrievalFailed";a.GetClientCapabilitiesFailed="ClientError_GetClientCapabilitiesFailed";a.NativeCredentialRetrievalFailed="ClientError_NativeCredentialRetrievalFailed";a.NativeValidationFailure="ClientError_NativeValidationFailure";
a.NativeDeviceIncapable="ClientError_NativeDeviceIncapable";a.AbortError="ClientError_AbortError";a.UnexpectedAbortError="ClientError_UnexpectedAbortError";a.MissingCsrfToken="ServerError_MissingCsrfToken";a.EnrollmentFailed="ServerError_EnrollmentFailed";a.CredentialNotFound="ServerError_CredentialNotFound";a.ValidationFailure="ServerError_ValidationFailure";a.InvalidInput="ServerError_InvalidInput";a.InternalFailure="ServerError_InternalFailure";a.UnrecognizedFailure="ClientError_UnrecognizedFailure";
return a}({}),z=function(){function a(b,c,d,e){k(this,a);this._errorCodes=x(b);c&&(this._redirectionUrl=c);d&&(this._abortReason=d);e&&(this._sourceException=e)}t(a,[{key:"appendErrorCode",value:function(a){this._errorCodes.includes(a)||this._errorCodes.push(a)}},{key:"errorCodes",get:function(){return this._errorCodes}},{key:"redirectionUrl",get:function(){return this._redirectionUrl}},{key:"abortReason",get:function(){return this._abortReason}},{key:"sourceException",get:function(){return this._sourceException}}],
[{key:"quickBuild",value:function(b,c,d,e){for(var f=arguments.length,g=Array(4<f?f-4:0),q=4;q<f;q++)g[q-4]=arguments[q];return new a([b].concat(g),c,d,e)}},{key:"dummyBuild",value:function(){return new a([])}}]);return a}(),ua=function(){function a(b){k(this,a);this._errorDetails=b}t(a,[{key:"errorCodes",get:function(){return this._errorDetails.errorCodes}},{key:"redirectionUrl",get:function(){return this._errorDetails.redirectionUrl}},{key:"abortReason",get:function(){return this._errorDetails.abortReason}},
{key:"isSuccess",get:function(){return 0==this._errorDetails.errorCodes.length}}]);return a}(),nc=function(a){a.NUDGE="nudge";a.PASSKEY_MANAGEMENT="passkeyManagement";return a}({}),oc=function(a){a.YOUR_ACCOUNT="YourAccount";a.YOUR_ORDERS="YourOrders";return a}({}),mc=function(a){a.CONDITIONAL_CREATE="conditionalCreate";a.CONDITIONAL_GET="conditionalGet";a.HYBRID_TRANSPORT="hybridTransport";a.PASSKEY_PLATFORM_AUTHENTICATOR="passkeyPlatformAuthenticator";a.USER_VERIFYING_PLATFORM_AUTHENTICATOR="userVerifyingPlatformAuthenticator";
a.RELATED_ORIGINS="relatedOrigins";return a}({}),Qa=function(a){function b(a){k(this,b);return d.call(this,a)}c(b,a);var d=e(b);t(b,null,[{key:"success",value:function(){return new b(z.dummyBuild())}},{key:"error",value:function(a){return new b(a)}}]);return b}(ua),Ra=function(a){function b(a){k(this,b);return d.call(this,a)}c(b,a);var d=e(b);t(b,null,[{key:"success",value:function(){return new b(z.dummyBuild())}},{key:"error",value:function(a){return new b(a)}}]);return b}(ua),qa=function(a){function b(a,
c,e){k(this,b);a=d.call(this,a);a._arb=c;a._password_credential=e;return a}c(b,a);var d=e(b);t(b,[{key:"arb",get:function(){return this._arb}},{key:"password_credential",get:function(){return this._password_credential}},{key:"isSuccess",get:function(){return this._arb!=p&&0==this._errorDetails.errorCodes.length||this._password_credential!=p&&0==this._errorDetails.errorCodes.length}}],[{key:"success",value:function(a,c){return new b(z.dummyBuild(),a,c)}},{key:"error",value:function(a){return new b(a)}}]);
return b}(ua),Oa=function(a){function b(a,c){k(this,b);a=d.call(this,a);a._assertion=c;return a}c(b,a);var d=e(b);t(b,[{key:"assertion",get:function(){return this._assertion}},{key:"isSuccess",get:function(){return this._assertion!=p&&0==this._errorDetails.errorCodes.length}}],[{key:"success",value:function(a){return new b(z.dummyBuild(),a)}},{key:"error",value:function(a){return new b(a)}}]);return b}(ua),Pa=function(a){function b(a,c){k(this,b);a=d.call(this,a);a._clientCapabilities=c;return a}
c(b,a);var d=e(b);t(b,[{key:"clientCapabilities",get:function(){return this._clientCapabilities}},{key:"isSuccess",get:function(){return this._clientCapabilities!=p&&0==this._errorDetails.errorCodes.length}}],[{key:"success",value:function(a){return new b(z.dummyBuild(),a)}},{key:"error",value:function(a){return new b(a)}}]);return b}(ua),Y=function(a){a.NATIVE_ENABLE="nativeEnable";a.USE_NATIVE_BRIDGE_FOR_ENROLL="useNativeBridgeForEnroll";a.USE_NATIVE_BRIDGE_FOR_SIGN_IN="useNativeBridgeForSignIn";
a.USE_NATIVE_BRIDGE_FOR_AUTOFILL="useNativeBridgeForAutofill";a.LAUNCHED_APPS="launchedApps";a.ENROLLMENT_WEBLABS_RESULT="enrollmentWeblabsResult";return a}({}),Ia=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.metricsPublisher=b}v(a,[{key:"publishErrorMetrics",value:function(a){a.iosErrorDetail?this.publishIOSErrorMetrics(a):a.androidErrorDetail?this.publishAndroidErrorMetrics(a):this.publishWebErrorMetrics(a)}},{key:"publishIOSErrorMetrics",
value:function(a){var b=a.name;if(a=a.iosErrorDetail)a.code||a.message||a.domain?(b="".concat(b,":").concat(a.code||""),a="CODE:".concat(a.code||"",";DOMAIN:").concat(a.domain||"",";MESSAGE:").concat(a.message||""),this.metricsPublisher.publishCounterOnce(b),this.metricsPublisher.publishStringTruncate(b,a)):this.metricsPublisher.publishCounterOnce(b)}},{key:"publishAndroidErrorMetrics",value:function(a){var b=a.name;if(a=a.androidErrorDetail)a="PLATFORM_MSG:".concat(a.platformExceptionMessage||"",
";MAP_MSG:").concat(a.mapErrorMessage||""),this.metricsPublisher.publishCounterOnce(b),this.metricsPublisher.publishStringTruncate(b,a)}},{key:"publishWebErrorMetrics",value:function(a){this.metricsPublisher.publishStringTruncate(a.name,a.message)}}]);return a}(),E=F(7395),pc=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}tb(a,[{key:"create",value:function(a,b){return M(a,b)}}]);return a}(),G=F(6957),X=function(){function a(){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");this.config=rb}R(a,[{key:"getConfig",value:function(a){var b=this.config;if(a){a=wb(a);var c;try{for(a.s();!(c=a.n()).done;){var d=c.value;if("object"===N(b)&&null!==b&&d in b)b=b[d];else return p}}catch(Ab){a.e(Ab)}finally{a.f()}}return b}},{key:"injectConfiguration",value:function(a){this.config=a;this.injectSupportAppIdentifiersToNative()}},{key:"injectSupportAppIdentifiersToNative",value:function(){var a={ios_app:{launchedApps:this.getConfig(["ios_app",
"launchedApps"])},android_app:{launchedApps:this.getConfig(["android_app","launchedApps"])}};E.Ps.getInstance().injectNativeConfiguration(a)}}],[{key:"getInstance",value:function(){a.instance||(a.instance=new a);return a.instance}}]);return a}(),Ya={},Cb="IdentityWebAuthnNativeJSSDK",qc=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}Eb(a,[{key:"create",value:function(a,b){return Fb(a,b)}}]);return a}(),Jb=function(){function a(){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");}Hb(a,null,[{key:"getInstance",value:function(){return ya(Y.USE_NATIVE_BRIDGE_FOR_ENROLL)?new pc:new qc}}]);return a}(),rc=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}Lb(a,[{key:"get",value:function(a,b){return Mb(a,b)}}]);return a}(),sc=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}Ob(a,[{key:"get",value:function(a,b){return Qb(a,
b)}}]);return a}(),Ub=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}Sb(a,null,[{key:"getInstance",value:function(a){return ya(a?Y.USE_NATIVE_BRIDGE_FOR_AUTOFILL:Y.USE_NATIVE_BRIDGE_FOR_SIGN_IN)?new rc:new sc}}]);return a}(),tc=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}cc(a,[{key:"get",value:function(a){return dc(a)}}]);return a}(),ic=function(){function a(){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");}fc(a,null,[{key:"getInstance",value:function(){return new tc}}]);return a}(),lc=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}jc(a,[{key:"injectWebAuthnConfiguration",value:function(a,b,c){try{if(null===a||a===p||""===a.trim())c.publishCounterOnce("EmptyConfig:"+A.navigator.userAgent);else{var d="";try{d=atob(a)}catch(Xa){c.publishCounterOnce("ConfigDecodeError");return}try{var e=
JSON.parse(d)}catch(Xa){c.publishCounterOnce("ConfigParseError");return}var f={android_app:{nativeEnable:e.android.enabled,useNativeBridgeForSignIn:e.android.useNativeBridgeforSignIn,useNativeBridgeForAutofill:e.android.useNativeBridgeforAutoFill,useNativeBridgeForEnroll:e.android.useNativeBridgeforEnroll,enrollmentWeblabsResult:e.android.enrollmentWeblabsResult,launchedApps:e.android.launchedApps},ios_app:{nativeEnable:e.ios.enabled,useNativeBridgeForSignIn:e.ios.useNativeBridgeforSignIn,useNativeBridgeForAutofill:e.ios.useNativeBridgeforAutoFill,
useNativeBridgeForEnroll:e.ios.useNativeBridgeforEnroll,enrollmentWeblabsResult:e.ios.enrollmentWeblabsResult,launchedApps:e.ios.launchedApps},app_name:b};return X.getInstance().injectConfiguration(f)}}catch(Xa){c.publishCounterOnce("InjectMobileSDCError")}}},{key:"injectConfiguration",value:function(a){return X.getInstance().injectConfiguration(a)}},{key:"enrollPasskey",value:function(a){var b=(0,G.generateUUID)(),c=P("Enroll",b);c.publishCounterOnce("Start");return Q(Vb({actionId:b,associationHandle:a.associationHandle,
enrollWorkflowName:a.enrollWorkflowName,pageType:a.pageType,returnTo:a.returnTo})).then(function(d){return Q(cb(d.credentialParameters,c)).then(function(c){var e=c.response;e={id:c.id,response:{clientDataJSON:(0,E.$_)(e.clientDataJSON),attestationObject:(0,E.$_)(e.attestationObject),transports:e.getTransports()},clientExtensionResults:c.getClientExtensionResults(),type:c.type};null!=c.authenticatorAttachment&&(e.authenticatorAttachment=c.authenticatorAttachment);c=JSON.stringify(e);return Q(Wb({authenticatorAttestation:c,
challengeId:d.challengeId,arb:d.arb,actionId:b,associationHandle:a.associationHandle,enrollWorkflowName:a.enrollWorkflowName}))})}).then(function(){c.publishCounterOnce("Success");return Qa.success()})["catch"](function(a){return ta(a,Qa.error,c)})}},{key:"signInWithPasskey",value:function(a){var b=P(a.operationNameForMetrics,a.actionIdForMetrics),c=U(U(U({},K(a.serializedCredentialParameters)),!!a.signal&&{signal:a.signal}),a.autofillMode!=p&&{autofillMode:a.autofillMode});return Q(Ka(c,b)).then(function(c){if("password"in
c)return qa.success(p,c);"Autofill"===a.operationNameForMetrics&&b.publishCounterOnce("PasskeyAutofillClicked");c={challengeId:a.challengeId,authenticationAssertion:wa(I(c)),arb:a.arb};return Q(Yb(c))}).then(function(a){return qa.success(a.arb,a.password_credential)})["catch"](function(a){return ta(a,qa.error,b)})}},{key:"removeEnrolledPasskeys",value:function(a){var b=a.actionId?a.actionId:(0,G.generateUUID)(),c=P("Delete",b);c.publishCounterOnce("Start");return Q(Xb({actionId:b,associationHandle:a.associationHandle,
kavachCredentialList:a.kavachCredentialList})).then(function(){c.publishCounterOnce("Success");return Ra.success()})["catch"](function(a){return ta(a,Ra.error,c)})}},{key:"fetchPasskeySignInAssertion",value:function(a){var b=P(a.operationNameForMetrics,a.actionIdForMetrics);a=U(U(U(U({},K(a.serializedCredentialParameters)),a.signal!=p&&{signal:a.signal}),a.autofillMode!=p&&{autofillMode:a.autofillMode}),a.preferImmediatelyAvailableCredentials!=p&&{preferImmediatelyAvailableCredentials:a.preferImmediatelyAvailableCredentials});
return Q(Ka(a,b)).then(function(a){a=I(a);return Oa.success(wa(a))})["catch"](function(a){return ta(a,Oa.error,b)})}},{key:"isWebAuthnSupported",value:function(a){return V(a)}},{key:"shouldEnableEnrollment",value:function(){return xa()}},{key:"setPasskeyEligibilityCookie",value:function(a){ac(a)}},{key:"reportDevicePasskeyCapability",value:function(a){ja(a)}},{key:"getClientCapabilities",value:function(a){return Q(hc(a)).then(function(a){return Pa.success(a)})["catch"](function(b){return ta(b,Pa.error,
a)})}}]);return a}()})();ea=da})();"use strict";K.register("IdentityWebAuthn",function(){return ea})});